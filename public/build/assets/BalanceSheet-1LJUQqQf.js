import{t as I,r as E,j as e,Q as v,S as C}from"./app-Cfy4TXUM.js";import{A as F,S as Y,B as j}from"./AdminSidebarLayout-Buj-taLG.js";import{d}from"./dayjs.min-CQ88ldzR.js";import{A as Z}from"./index-B5CpmtyB.js";import{R as z}from"./CheckCircleOutlined-D3khjOz4.js";import{R as $}from"./CloseCircleOutlined-mKdyCeJY.js";import{D}from"./index-B7DGN-AY.js";import{R}from"./DownloadOutlined-wtaD_--B.js";import{T as k}from"./index-BAjCEJt5.js";import{R as n,C as i}from"./row-DnGM8N7d.js";import{C as p}from"./index-mG9EyX9P.js";import"./SessionTimeout-Dn5jdFb_.js";import"./Modal-dSY3wv-x.js";import"./transition-CwSGfga5.js";import"./PrimaryButton-D3tyYlDf.js";import"./SecondaryButton-HhmXi8wu.js";import"./CheckCircleFilled-JrBW7ofW.js";import"./InfoCircleFilled-Ce035z5p.js";import"./useIcons-C0CVJH8d.js";import"./getAllowClear-CEhEtxYT.js";import"./DownOutlined-D7IvzF20.js";import"./CalendarOutlined-Dc2SfXVk.js";import"./ClockCircleOutlined-BEpyFDSv.js";import"./EditOutlined-DIT7bWP5.js";import"./TextArea-kKKIj_tr.js";const{Title:P,Text:t}=k;function xe({assets:S,liabilities:T,equity:u,groupedAssets:M,groupedLiabilities:q,groupedEquity:O,totals:o,filters:m}){const{token:r}=I.useToken(),[y,f]=E.useState(m.as_of_date?d(m.as_of_date):d()),B=()=>{C.get("/admin-portal/balance-sheet",{as_of_date:y.format("YYYY-MM-DD")},{preserveState:!0,preserveScroll:!0})},b=()=>{console.log("Export balance sheet")},g=(_,x,h=!0)=>{if(!x||x.length===0)return null;const L=x.reduce((s,l)=>{const a=l.account_subtype||"Other";return s[a]||(s[a]=[]),s[a].push(l),s},{});return e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(P,{level:5,style:{marginBottom:16,color:r.colorPrimary,borderBottom:`2px solid ${r.colorPrimary}`,paddingBottom:8},children:_}),Object.entries(L).map(([s,l])=>{const a=l.reduce((c,A)=>c+parseFloat(A.balance),0);return e.jsxs("div",{style:{marginBottom:16},children:[h&&e.jsx("div",{style:{fontWeight:"bold",marginBottom:8,color:r.colorTextSecondary},children:s}),l.map(c=>e.jsxs(n,{style:{marginBottom:4,paddingLeft:h?16:0},children:[e.jsx(i,{span:16,children:e.jsx(t,{children:c.account_name})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{children:["TZS ",parseFloat(c.balance).toLocaleString()]})})]},c.id)),h&&l.length>1&&e.jsxs(n,{style:{marginTop:8,paddingLeft:16,borderTop:`1px solid ${r.colorBorder}`,paddingTop:4},children:[e.jsx(i,{span:16,children:e.jsxs(t,{strong:!0,children:["Total ",s]})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,children:["TZS ",a.toLocaleString()]})})]})]},s)})]})};return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:"Balance Sheet - Tabata Welfare Association"}),e.jsxs(F,{children:[o&&e.jsx(Z,{message:o.is_balanced?"Balance Sheet is Balanced":"Balance Sheet is Out of Balance",description:o.is_balanced?"Assets equal Liabilities plus Equity. Your financial position is properly stated.":`There is a difference of TZS ${parseFloat(o.difference).toLocaleString()}. Please review your accounts.`,type:o.is_balanced?"success":"error",icon:o.is_balanced?e.jsx(z,{}):e.jsx($,{}),showIcon:!0,style:{marginBottom:16}}),e.jsxs("div",{style:{marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs(Y,{children:[e.jsx(D,{placeholder:"As of Date",value:y,onChange:f,style:{width:160}}),e.jsx(j,{onClick:B,type:"primary",children:"Generate Report"})]}),e.jsx(j,{icon:e.jsx(R,{}),onClick:b,children:"Export"})]}),e.jsxs("div",{style:{padding:24,backgroundColor:r.colorBgContainer,border:`1px solid ${r.colorBorder}`,borderRadius:8},children:[e.jsx("div",{style:{textAlign:"center",marginBottom:32},children:e.jsxs(t,{type:"secondary",children:["As of ",d(m.as_of_date).format("MMMM DD, YYYY")]})}),g("ASSETS",S),e.jsxs(n,{style:{marginBottom:32,paddingTop:12,borderTop:`2px solid ${r.colorPrimary}`,borderBottom:`3px double ${r.colorPrimary}`,paddingBottom:12},children:[e.jsx(i,{span:16,children:e.jsx(t,{strong:!0,style:{fontSize:16},children:"TOTAL ASSETS"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,style:{fontSize:16,color:r.colorPrimary},children:["TZS ",parseFloat(o.total_assets).toLocaleString()]})})]}),g("LIABILITIES",T),e.jsxs(n,{style:{marginBottom:16,paddingTop:8,borderTop:`1px solid ${r.colorBorder}`,paddingBottom:8},children:[e.jsx(i,{span:16,children:e.jsx(t,{strong:!0,children:"TOTAL LIABILITIES"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,children:["TZS ",parseFloat(o.total_liabilities).toLocaleString()]})})]}),g("EQUITY",u,!1),o.net_income!==0&&e.jsxs(n,{style:{marginBottom:8},children:[e.jsx(i,{span:16,children:e.jsx(t,{children:"Net Income (Current Period)"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{style:{color:o.net_income>=0?r.colorSuccess:r.colorError},children:["TZS ",parseFloat(o.net_income).toLocaleString()]})})]}),e.jsxs(n,{style:{marginBottom:16,paddingTop:8,borderTop:`1px solid ${r.colorBorder}`,paddingBottom:8},children:[e.jsx(i,{span:16,children:e.jsx(t,{strong:!0,children:"TOTAL EQUITY"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,children:["TZS ",parseFloat(o.total_equity_with_income).toLocaleString()]})})]}),e.jsxs(n,{style:{marginBottom:24,paddingTop:12,borderTop:`2px solid ${r.colorPrimary}`,borderBottom:`3px double ${r.colorPrimary}`,paddingBottom:12},children:[e.jsx(i,{span:16,children:e.jsx(t,{strong:!0,style:{fontSize:16},children:"TOTAL LIABILITIES & EQUITY"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,style:{fontSize:16,color:r.colorPrimary},children:["TZS ",parseFloat(o.total_liabilities_and_equity).toLocaleString()]})})]}),e.jsxs("div",{style:{textAlign:"center",padding:16,backgroundColor:o.is_balanced?r.colorSuccessBg:r.colorErrorBg,borderRadius:8,marginTop:24},children:[e.jsxs(t,{strong:!0,style:{fontSize:14},children:["Assets (TZS ",parseFloat(o.total_assets).toLocaleString(),")"," = ","Liabilities (TZS ",parseFloat(o.total_liabilities).toLocaleString(),")"," + ","Equity (TZS ",parseFloat(o.total_equity_with_income).toLocaleString(),")"]}),!o.is_balanced&&e.jsx("div",{style:{marginTop:8},children:e.jsxs(t,{type:"danger",children:["Difference: TZS ",parseFloat(o.difference).toLocaleString()]})})]}),e.jsx("div",{style:{marginTop:32,textAlign:"center",borderTop:`1px solid ${r.colorBorder}`,paddingTop:16},children:e.jsxs(t,{type:"secondary",style:{fontSize:12},children:["Generated on ",d().format("MMMM DD, YYYY HH:mm")]})})]}),e.jsxs("div",{style:{marginTop:24,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs(p,{size:"small",style:{backgroundColor:r.colorInfoBg},children:[e.jsx(t,{type:"secondary",children:"Total Assets"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:r.colorInfo},children:["TZS ",parseFloat(o.total_assets).toLocaleString()]})]}),e.jsxs(p,{size:"small",style:{backgroundColor:r.colorWarningBg},children:[e.jsx(t,{type:"secondary",children:"Total Liabilities"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:r.colorWarning},children:["TZS ",parseFloat(o.total_liabilities).toLocaleString()]})]}),e.jsxs(p,{size:"small",style:{backgroundColor:r.colorSuccessBg},children:[e.jsx(t,{type:"secondary",children:"Total Equity"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:r.colorSuccess},children:["TZS ",parseFloat(o.total_equity_with_income).toLocaleString()]})]}),e.jsxs(p,{size:"small",style:{backgroundColor:o.net_income>=0?r.colorSuccessBg:r.colorErrorBg},children:[e.jsx(t,{type:"secondary",children:"Net Income"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:o.net_income>=0?r.colorSuccess:r.colorError},children:["TZS ",parseFloat(o.net_income).toLocaleString()]})]})]})]})]})}export{xe as default};
