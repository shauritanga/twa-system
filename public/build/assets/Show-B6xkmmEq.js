import{J as v,t as B,j as e,S as y}from"./app-Cfy4TXUM.js";import{A as I,S as c,k as _,B as S}from"./AdminSidebarLayout-Buj-taLG.js";import{d as C}from"./dayjs.min-CQ88ldzR.js";import{B as w}from"./index-esw8YQV4.js";import{C as k}from"./index-mG9EyX9P.js";import{T as z}from"./index-BAjCEJt5.js";import{T as n}from"./index-eYiOuDe6.js";import{D as d}from"./index-DK02w_Sf.js";import{D as s}from"./index-fZXMI_hl.js";import{R}from"./ClockCircleOutlined-BEpyFDSv.js";import{R as D}from"./GlobalOutlined-ClzCwejk.js";import{R as A}from"./ArrowLeftOutlined-RoMYuqwe.js";import"./SessionTimeout-Dn5jdFb_.js";import"./Modal-dSY3wv-x.js";import"./transition-CwSGfga5.js";import"./PrimaryButton-D3tyYlDf.js";import"./SecondaryButton-HhmXi8wu.js";import"./DownOutlined-D7IvzF20.js";import"./EditOutlined-DIT7bWP5.js";import"./TextArea-kKKIj_tr.js";import"./getAllowClear-CEhEtxYT.js";const{Title:a,Text:l,Paragraph:ee}=z;function re(){const{log:r}=v().props,{token:t}=B.useToken(),x=o=>({low:"green",medium:"blue",high:"orange",critical:"red"})[o]||"default",m=o=>({auth:"purple",member:"blue",financial:"green",system:"orange",security:"red",general:"default"})[o]||"default",h=o=>({created:"green",updated:"blue",deleted:"red",viewed:"cyan",login:"purple",logout:"purple",posted:"green",reversed:"orange"})[o.toLowerCase()]||"default",f=o=>{if(!o)return"";const i=o.split("\\");return i[i.length-1]},b=()=>{if(!r.old_values||!r.new_values)return e.jsx(l,{type:"secondary",children:"No changes recorded"});const o=[],i=typeof r.old_values=="string"?JSON.parse(r.old_values):r.old_values,j=typeof r.new_values=="string"?JSON.parse(r.new_values):r.new_values;return Object.keys(j).forEach(p=>{const u=i[p],g=j[p];u!==g&&o.push(e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs(l,{strong:!0,style:{fontSize:"14px"},children:[p,":"]}),e.jsxs("div",{style:{marginLeft:"16px",marginTop:"4px"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx(l,{type:"secondary",style:{fontSize:"13px"},children:"Old: "}),e.jsx(l,{delete:!0,type:"secondary",style:{fontSize:"13px"},children:u||"(empty)"})]}),e.jsxs("div",{children:[e.jsx(l,{type:"secondary",style:{fontSize:"13px"},children:"New: "}),e.jsx(l,{style:{color:t.colorSuccess,fontSize:"13px"},children:g||"(empty)"})]})]})]},p))}),o.length>0?o:e.jsx(l,{type:"secondary",children:"No changes detected"})};return e.jsx(I,{children:e.jsxs("div",{style:{padding:"24px 0"},children:[e.jsx(w,{items:[{title:e.jsx("span",{onClick:()=>y.visit(route("admin-portal.audit-logs")),style:{cursor:"pointer",color:t.colorPrimary},children:"Audit Logs"})},{title:`Log #${r.id}`}],style:{marginBottom:"24px"}}),e.jsxs(k,{children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{level:3,style:{margin:0,marginBottom:"12px"},children:"Audit Log Details"}),e.jsxs(c,{size:"middle",children:[e.jsx(n,{color:h(r.action),children:r.action.toUpperCase()}),r.category&&e.jsx(n,{color:m(r.category),children:r.category.toUpperCase()}),e.jsx(n,{color:x(r.severity),children:r.severity.toUpperCase()})]})]}),e.jsx(d,{}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{level:5,children:"Basic Information"}),e.jsxs(s,{bordered:!0,column:2,size:"small",children:[e.jsx(s.Item,{label:"Date & Time",span:2,children:e.jsxs(c,{children:[e.jsx(R,{}),C(r.created_at).format("MMMM DD, YYYY HH:mm:ss")]})}),e.jsx(s.Item,{label:"User",children:e.jsxs(c,{children:[e.jsx(_,{}),r.user_name||"System"]})}),e.jsx(s.Item,{label:"Email",children:r.user_email||"-"}),e.jsx(s.Item,{label:"Role",children:r.user_role||"-"}),e.jsx(s.Item,{label:"Action",children:e.jsx(n,{color:h(r.action),children:r.action.toUpperCase()})}),e.jsx(s.Item,{label:"Category",children:r.category?e.jsx(n,{color:m(r.category),children:r.category.toUpperCase()}):"-"}),e.jsx(s.Item,{label:"Severity",children:e.jsx(n,{color:x(r.severity),children:r.severity.toUpperCase()})}),e.jsx(s.Item,{label:"Description",span:2,children:r.description||"-"})]})]}),e.jsx(d,{}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{level:5,children:"Model Information"}),e.jsxs(s,{bordered:!0,column:2,size:"small",children:[e.jsx(s.Item,{label:"Model Type",children:r.model_type?f(r.model_type):"-"}),e.jsx(s.Item,{label:"Model ID",children:r.model_id||"-"}),e.jsx(s.Item,{label:"Model Name",span:2,children:r.model_name||"-"}),e.jsx(s.Item,{label:"Full Model Type",span:2,children:e.jsx(l,{code:!0,style:{fontSize:"12px"},children:r.model_type||"-"})})]})]}),(r.old_values||r.new_values)&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{level:5,children:"Changes"}),e.jsx("div",{style:{padding:"16px",backgroundColor:t.colorBgContainer,border:`1px solid ${t.colorBorder}`,borderRadius:"6px"},children:b()})]})]}),e.jsx(d,{}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{level:5,children:"Request Information"}),e.jsxs(s,{bordered:!0,column:2,size:"small",children:[e.jsx(s.Item,{label:"IP Address",children:e.jsxs(c,{children:[e.jsx(D,{}),r.ip_address||"-"]})}),e.jsx(s.Item,{label:"Method",children:r.method?e.jsx(n,{color:"blue",children:r.method}):"-"}),e.jsx(s.Item,{label:"URL",span:2,children:e.jsx(l,{code:!0,style:{fontSize:"12px",wordBreak:"break-all"},children:r.url||"-"})}),e.jsx(s.Item,{label:"Session ID",span:2,children:e.jsx(l,{code:!0,style:{fontSize:"11px",wordBreak:"break-all"},children:r.session_id||"-"})}),r.batch_id&&e.jsx(s.Item,{label:"Batch ID",span:2,children:e.jsx(l,{code:!0,style:{fontSize:"11px",wordBreak:"break-all"},children:r.batch_id})})]})]}),r.properties&&Object.keys(r.properties).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{level:5,children:"Additional Properties"}),e.jsx("div",{style:{padding:"12px",backgroundColor:t.colorBgContainer,border:`1px solid ${t.colorBorder}`,borderRadius:"6px"},children:e.jsx("pre",{style:{margin:0,fontSize:"12px",overflow:"auto"},children:JSON.stringify(r.properties,null,2)})})]})]}),r.user_agent&&e.jsxs(e.Fragment,{children:[e.jsx(d,{}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx(a,{level:5,children:"User Agent"}),e.jsx("div",{style:{padding:"12px",backgroundColor:t.colorBgContainer,border:`1px solid ${t.colorBorder}`,borderRadius:"6px",fontSize:"12px",wordBreak:"break-all"},children:r.user_agent})]})]}),e.jsx(d,{}),e.jsx(c,{children:e.jsx(S,{icon:e.jsx(A,{}),onClick:()=>y.visit(route("admin-portal.audit-logs")),children:"Back to Audit Logs"})})]})]})})}export{re as default};
