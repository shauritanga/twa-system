import{J as R,r as i,j as e,Q as I,t as d,S as o}from"./app-CCWscn4N.js";import{S as P,a as w}from"./SidebarLayout-D4nqS7b6.js";import{P as x}from"./PrimaryButton-0XQdD5oU.js";import{S as y}from"./SecondaryButton-DbLXN_Wj.js";import{D as z}from"./DangerButton-DfvhuKss.js";import{T as A}from"./TextInput-B3Usmh-h.js";import{S as B}from"./SelectInput-29uheY41.js";import{C as L}from"./ConfirmationModal-POaRmgwl.js";import{u as G,T as Q}from"./useToast-C8LO0AXC.js";import{F as b}from"./PlusIcon-khp_1ENM.js";import{F as Z}from"./MagnifyingGlassIcon-u4lgG6o9.js";import{F as H}from"./EyeIcon-DJbsJ0HV.js";import{F as J}from"./PencilIcon-sALstWWC.js";import{F as V}from"./TrashIcon-DME0PLII.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./ExclamationTriangleIcon-ChxHdgS_.js";import"./InformationCircleIcon-DXHaClqH.js";import"./CheckCircleIcon-Ba1qBm0g.js";import"./ExclamationCircleIcon-CdqybNTP.js";import"./XCircleIcon-CqlH9Z_j.js";function fe({campaigns:a,filters:n}){const{flash:t}=R().props,{toasts:N,success:u,error:g,warning:v,removeToast:S}=G(),[c,C]=i.useState((n==null?void 0:n.search)||""),[h,W]=i.useState((n==null?void 0:n.status)||""),[F,m]=i.useState(!1),[l,f]=i.useState(null),[D,j]=i.useState(!1);i.useEffect(()=>{t!=null&&t.success&&u("Success",t.success),t!=null&&t.error&&g("Error",t.error),t!=null&&t.warning&&v("Warning",t.warning)},[t]);const k=s=>{s.preventDefault(),o.get(route("admin.fundraising-campaigns.index"),{search:c,status:h},{preserveState:!0,replace:!0})},T=(s,r)=>{o.get(route("admin.fundraising-campaigns.index"),{search:c,status:r},{preserveState:!0,replace:!0})},_=s=>{f(s),m(!0)},$=()=>{l&&(j(!0),o.delete(route("admin.fundraising-campaigns.destroy",l.id),{onSuccess:()=>{m(!1),f(null),u("Success","Fundraising campaign deleted successfully")},onError:()=>{g("Error","Failed to delete campaign")},onFinish:()=>{j(!1)}}))},E=s=>{const r={active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",paused:"bg-orange-100 text-orange-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"};return r[s]||r.draft},p=s=>new Intl.NumberFormat("en-TZ",{style:"currency",currency:"TZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),M=(s,r)=>r<=0?0:Math.min(100,s/r*100);return e.jsxs(P,{children:[e.jsx(I,{title:"Fundraising Campaigns Management"}),e.jsx(Q,{toasts:N,removeToast:S}),e.jsxs("div",{className:"md:flex md:items-center md:justify-between mb-6",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h2",{className:"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:truncate sm:text-3xl sm:tracking-tight flex items-center",children:[e.jsx(w,{className:"h-8 w-8 mr-3 text-red-600"}),"Fundraising Campaigns"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Manage fundraising campaigns and donation drives"})]}),e.jsx("div",{className:"mt-4 flex md:ml-4 md:mt-0",children:e.jsx(d,{href:route("admin.fundraising-campaigns.create"),children:e.jsxs(x,{children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg mb-6",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(A,{placeholder:"Search campaigns...",value:c,onChange:s=>C(s.target.value),className:"w-full"})}),e.jsx("div",{children:e.jsxs(B,{value:h,onChange:s=>T("status",s.target.value),className:"w-full",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),e.jsx("div",{children:e.jsxs(x,{type:"submit",className:"w-full",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Search"]})})]})})}),a.data&&a.data.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:a.data.map(s=>{const r=M(s.raised_amount,s.goal_amount);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[s.image_path&&e.jsx("img",{src:`/storage/${s.image_path}`,alt:s.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E(s.status)}`,children:s.status})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:[s.description.substring(0,100),"..."]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsxs("span",{children:[p(s.raised_amount)," raised"]}),e.jsxs("span",{children:[r.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{children:["Goal: ",p(s.goal_amount)]}),s.end_date&&e.jsxs("span",{children:["Ends: ",new Date(s.end_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{href:route("admin.fundraising-campaigns.show",s.id),className:"flex-1",children:e.jsxs(y,{size:"sm",className:"w-full",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"View"]})}),e.jsx(d,{href:route("admin.fundraising-campaigns.edit",s.id),className:"flex-1",children:e.jsxs(y,{size:"sm",className:"w-full",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),"Edit"]})}),e.jsx(z,{size:"sm",onClick:()=>_(s),children:e.jsx(V,{className:"h-4 w-4"})})]})]})]},s.id)})}):e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx(w,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No campaigns"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by creating a new fundraising campaign."}),e.jsx("div",{className:"mt-6",children:e.jsx(d,{href:route("admin.fundraising-campaigns.create"),children:e.jsxs(x,{children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})})})]})}),a.links&&e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",a.from," to ",a.to," of ",a.total," results"]}),e.jsx("div",{className:"flex space-x-1",children:a.links.map((s,r)=>e.jsx("button",{onClick:()=>s.url&&o.get(s.url),disabled:!s.url,className:`px-3 py-1 text-sm rounded ${s.active?"bg-blue-500 text-white":s.url?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},r))})]})}),e.jsx(L,{show:F,onClose:()=>m(!1),onConfirm:$,title:"Delete Campaign",description:`Are you sure you want to delete "${l==null?void 0:l.title}"? This action cannot be undone.`,confirmText:"Delete",processing:D})]})}export{fe as default};
