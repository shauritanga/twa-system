import{a as F,r as u,j as e,S as b}from"./app-CCWscn4N.js";import{A as I,C as a,S as k,B as g}from"./AdminSidebarLayout-BHFbP-0Z.js";import{d as c}from"./dayjs.min-Be2yCFt4.js";import{S as T}from"./index-C-HA1eIq.js";import{D as C}from"./index-D2nthcHU.js";import{R as M}from"./useIcons-Bh5YfX0K.js";import{R as B}from"./DownloadOutlined-DAAaMqUK.js";import{E as p}from"./index-CdwOtgdH.js";import{D as d}from"./index-BVXbRpir.js";import{T as _}from"./index-CCn2kg36.js";import{F as n}from"./Table-DUVIRzZL.js";import{T as P}from"./index-iEk3Z0oW.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./PrimaryButton-0XQdD5oU.js";import"./SecondaryButton-DbLXN_Wj.js";import"./CalendarOutlined-eixNbCoN.js";import"./ClockCircleOutlined-BGBypZha.js";import"./getAllowClear-ggc3xdDv.js";import"./DownOutlined-B9GtLQuW.js";import"./useForm-CpR6UdBL.js";import"./index-5hnhc-Y9.js";import"./Input-Br3Lt1rS.js";import"./EditOutlined-BgapihRa.js";import"./TextArea-n8YGhIra.js";const{Title:se,Text:m}=P;function ce({accounts:x,ledgerData:o,filters:s}){const{token:t}=F.useToken(),[h,y]=u.useState(s.account_id||null),[l,S]=u.useState(s.date_from?c(s.date_from):null),[i,j]=u.useState(s.date_to?c(s.date_to):null),E=()=>{b.get("/admin-portal/general-ledger",{account_id:h,date_from:l?l.format("YYYY-MM-DD"):null,date_to:i?i.format("YYYY-MM-DD"):null},{preserveState:!0,preserveScroll:!0})},w=()=>{y(null),S(null),j(null),b.get("/admin-portal/general-ledger",{},{preserveState:!0,preserveScroll:!0})},L=()=>{console.log("Export ledger")},Y=r=>({asset:"blue",liability:"red",equity:"purple",revenue:"green",expense:"orange"})[r]||"default",v=[{title:"Date",dataIndex:"date",key:"date",width:120,render:r=>c(r).format("MMM DD, YYYY")},{title:"Entry Number",dataIndex:"entry_number",key:"entry_number",width:140},{title:"Reference",dataIndex:"reference",key:"reference",width:120,render:r=>r||"-"},{title:"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:"Debit",dataIndex:"debit",key:"debit",width:140,align:"right",render:r=>r>0?`TZS ${parseFloat(r).toLocaleString()}`:"-"},{title:"Credit",dataIndex:"credit",key:"credit",width:140,align:"right",render:r=>r>0?`TZS ${parseFloat(r).toLocaleString()}`:"-"},{title:"Balance",dataIndex:"balance",key:"balance",width:150,align:"right",render:r=>e.jsxs("strong",{style:{color:r<0?t.colorError:t.colorText},children:["TZS ",parseFloat(r).toLocaleString()]})}];return e.jsx(I,{children:e.jsxs(a,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs(k,{wrap:!0,children:[e.jsx(T,{placeholder:"Select Account",value:h,onChange:y,style:{width:300},showSearch:!0,optionFilterProp:"children",filterOption:(r,f)=>f.children.toLowerCase().includes(r.toLowerCase()),children:x==null?void 0:x.map(r=>e.jsxs(T.Option,{value:r.id,children:[r.account_code," - ",r.account_name]},r.id))}),e.jsx(C,{placeholder:"From Date",value:l,onChange:S,style:{width:140}}),e.jsx(C,{placeholder:"To Date",value:i,onChange:j,style:{width:140}}),e.jsx(g,{onClick:E,type:"primary",icon:e.jsx(M,{}),disabled:!h,children:"View Ledger"}),e.jsx(g,{onClick:w,children:"Reset"})]}),o&&e.jsx(g,{icon:e.jsx(B,{}),onClick:L,children:"Export"})]}),o?e.jsxs("div",{children:[e.jsx(a,{size:"small",style:{marginBottom:16,backgroundColor:t.colorBgContainer},children:e.jsxs(d,{column:4,size:"small",children:[e.jsx(d.Item,{label:"Account Code",children:e.jsx("strong",{children:o.account.account_code})}),e.jsx(d.Item,{label:"Account Name",children:e.jsx("strong",{children:o.account.account_name})}),e.jsx(d.Item,{label:"Type",children:e.jsx(_,{color:Y(o.account.account_type),children:o.account.account_type.toUpperCase()})}),e.jsx(d.Item,{label:"Normal Balance",children:e.jsx(_,{color:o.account.normal_balance==="debit"?"blue":"green",children:o.account.normal_balance.toUpperCase()})})]})}),e.jsx(n,{columns:v,dataSource:o.transactions,rowKey:"id",pagination:!1,size:"small",bordered:!0,scroll:{x:1e3},locale:{emptyText:e.jsx(p,{description:"No transactions found for this account",image:p.PRESENTED_IMAGE_SIMPLE})},summary:()=>e.jsxs(e.Fragment,{children:[e.jsxs(n.Summary.Row,{style:{backgroundColor:t.colorBgLayout},children:[e.jsx(n.Summary.Cell,{index:0,colSpan:4,children:e.jsx("strong",{children:"Opening Balance"})}),e.jsx(n.Summary.Cell,{index:1,colSpan:2,align:"right",children:e.jsxs("strong",{children:["TZS ",parseFloat(o.opening_balance).toLocaleString()]})}),e.jsx(n.Summary.Cell,{index:2})]}),e.jsxs(n.Summary.Row,{style:{backgroundColor:t.colorBgLayout},children:[e.jsx(n.Summary.Cell,{index:0,colSpan:4,children:e.jsx("strong",{children:"Total Transactions"})}),e.jsx(n.Summary.Cell,{index:1,align:"right",children:e.jsxs("strong",{style:{color:t.colorPrimary},children:["TZS ",parseFloat(o.total_debit).toLocaleString()]})}),e.jsx(n.Summary.Cell,{index:2,align:"right",children:e.jsxs("strong",{style:{color:t.colorPrimary},children:["TZS ",parseFloat(o.total_credit).toLocaleString()]})}),e.jsx(n.Summary.Cell,{index:3})]}),e.jsxs(n.Summary.Row,{style:{backgroundColor:t.colorPrimaryBg},children:[e.jsx(n.Summary.Cell,{index:0,colSpan:4,children:e.jsx("strong",{children:"Ending Balance"})}),e.jsx(n.Summary.Cell,{index:1,colSpan:2,align:"right",children:e.jsxs("strong",{style:{fontSize:"16px",color:o.ending_balance<0?t.colorError:t.colorSuccess},children:["TZS ",parseFloat(o.ending_balance).toLocaleString()]})}),e.jsx(n.Summary.Cell,{index:2})]})]})}),e.jsxs("div",{style:{marginTop:16,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs(a,{size:"small",children:[e.jsx(m,{type:"secondary",children:"Opening Balance"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px"},children:["TZS ",parseFloat(o.opening_balance).toLocaleString()]})]}),e.jsxs(a,{size:"small",children:[e.jsx(m,{type:"secondary",children:"Total Debits"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:t.colorPrimary},children:["TZS ",parseFloat(o.total_debit).toLocaleString()]})]}),e.jsxs(a,{size:"small",children:[e.jsx(m,{type:"secondary",children:"Total Credits"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:t.colorPrimary},children:["TZS ",parseFloat(o.total_credit).toLocaleString()]})]}),e.jsxs(a,{size:"small",children:[e.jsx(m,{type:"secondary",children:"Ending Balance"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:o.ending_balance<0?t.colorError:t.colorSuccess},children:["TZS ",parseFloat(o.ending_balance).toLocaleString()]})]})]}),(l||i)&&e.jsx("div",{style:{marginTop:16,textAlign:"center"},children:e.jsxs(m,{type:"secondary",children:["Period: ",l?c(l).format("MMM DD, YYYY"):"Beginning"," to ",i?c(i).format("MMM DD, YYYY"):"Present"]})})]}):e.jsx(p,{description:"Select an account to view its general ledger",image:p.PRESENTED_IMAGE_SIMPLE})]})})}export{ce as default};
