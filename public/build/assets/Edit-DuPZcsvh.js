import{J as k,x as C,r as S,j as e,Q as F,t as g,S as T}from"./app-CCWscn4N.js";import{S as I,a as D}from"./SidebarLayout-D4nqS7b6.js";import{P as E}from"./PrimaryButton-0XQdD5oU.js";import{S as v}from"./SecondaryButton-DbLXN_Wj.js";import{T as c}from"./TextInput-B3Usmh-h.js";import{T as u,F as _}from"./FileInput-D3eku6KK.js";import{S as M}from"./SelectInput-29uheY41.js";import{I as d}from"./InputLabel-CkuccGPf.js";import{I as m}from"./InputError-DhZzip9X.js";import{u as U,T as P}from"./useToast-C8LO0AXC.js";import{F as B}from"./ArrowLeftIcon-Chvcx7Z8.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./DocumentIcon-DfMv9kcy.js";import"./VideoCameraIcon-BeaBo1qD.js";import"./CheckCircleIcon-Ba1qBm0g.js";import"./InformationCircleIcon-DXHaClqH.js";import"./ExclamationCircleIcon-CdqybNTP.js";import"./XCircleIcon-CqlH9Z_j.js";function te({campaign:t}){const{flash:n}=k().props,{toasts:f,success:p,error:x,removeToast:j}=U(),{data:s,setData:l,processing:h,errors:o}=C({title:t.title||"",description:t.description||"",full_description:t.full_description||"",goal_amount:t.goal_amount||"",status:t.status||"draft",start_date:t.start_date?new Date(t.start_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],end_date:t.end_date?new Date(t.end_date).toISOString().split("T")[0]:"",image_file:null,video_file:null,video_url:t.video_url||"",payment_methods:t.payment_methods||["bank_transfer","mobile_money"],bank_details:t.bank_details||"",mobile_money_number:t.mobile_money_number||"",is_featured:!!t.is_featured,sort_order:t.sort_order||0});S.useEffect(()=>{n!=null&&n.success&&p("Success",n.success),n!=null&&n.error&&x("Error",n.error)},[n]);const b=a=>{a.preventDefault();const i=new FormData;Object.keys(s).forEach(r=>{s[r]!==null&&s[r]!==void 0&&(r==="payment_methods"?s[r].forEach((y,w)=>{i.append(`payment_methods[${w}]`,y)}):r==="image_file"||r==="video_file"?s[r]&&i.append(r,s[r]):r==="is_featured"?i.append(r,s[r]?"1":"0"):i.append(r,s[r]))}),i.append("_method","PUT"),T.post(route("admin.fundraising-campaigns.update",t.id),i,{onSuccess:()=>{p("Success","Campaign updated successfully")},onError:r=>{console.log("Update errors:",r),x("Error","Failed to update campaign. Please check the form for errors.")}})},N=(a,i)=>{i?l("payment_methods",[...s.payment_methods,a]):l("payment_methods",s.payment_methods.filter(r=>r!==a))};return e.jsxs(I,{children:[e.jsx(F,{title:`Edit Campaign: ${t.title}`}),e.jsx(P,{toasts:f,removeToast:j}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:e.jsx(g,{href:route("admin.fundraising-campaigns.show",t.id),children:e.jsxs(v,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Back to Campaign"]})})}),e.jsxs("h2",{className:"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:truncate sm:text-3xl sm:tracking-tight flex items-center",children:[e.jsx(D,{className:"h-8 w-8 mr-3 text-red-600"}),"Edit Campaign"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Update the campaign details"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:e.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{htmlFor:"title",value:"Campaign Title"}),e.jsx(c,{id:"title",type:"text",className:"mt-1 block w-full",value:s.title,onChange:a=>l("title",a.target.value),required:!0}),e.jsx(m,{message:o.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"goal_amount",value:"Goal Amount (TZS)"}),e.jsx(c,{id:"goal_amount",type:"number",className:"mt-1 block w-full",value:s.goal_amount,onChange:a=>l("goal_amount",a.target.value),min:"1",required:!0}),e.jsx(m,{message:o.goal_amount,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"status",value:"Status"}),e.jsxs(M,{id:"status",className:"mt-1 block w-full",value:s.status,onChange:a=>l("status",a.target.value),required:!0,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsx(m,{message:o.status,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"description",value:"Short Description"}),e.jsx(u,{id:"description",className:"mt-1 block w-full",rows:3,value:s.description,onChange:a=>l("description",a.target.value),placeholder:"Brief description for campaign cards",required:!0}),e.jsx(m,{message:o.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"full_description",value:"Full Description"}),e.jsx(u,{id:"full_description",className:"mt-1 block w-full",rows:6,value:s.full_description,onChange:a=>l("full_description",a.target.value),placeholder:"Detailed description of the campaign goals and impact"}),e.jsx(m,{message:o.full_description,className:"mt-2"})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Media (Optional)"}),t.image_path&&!s.image_file&&e.jsxs("div",{className:"mb-6",children:[e.jsx(d,{value:"Current Image"}),e.jsxs("div",{className:"mt-2 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("img",{src:t.image_url,alt:"Current campaign image",className:"max-w-full h-32 object-cover rounded-lg"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Upload a new image below to replace this one"})]})]}),t.video_path&&!s.video_file&&e.jsxs("div",{className:"mb-6",children:[e.jsx(d,{value:"Current Video"}),e.jsxs("div",{className:"mt-2 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("video",{src:t.video_url_full,controls:!0,className:"max-w-full h-32 rounded-lg",children:"Your browser does not support the video tag."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Upload a new video below to replace this one"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(_,{id:"image_file",name:"image_file",label:t.image_path?"Upload New Campaign Image":"Upload Campaign Image",accept:"image/*",maxSize:5,value:s.image_file,onChange:(a,i)=>{l("image_file",a),i&&console.error("Image upload error:",i)},error:o.image_file,description:"JPEG, PNG, JPG, GIF, WebP up to 5MB",preview:!0})}),e.jsx("div",{children:e.jsx(_,{id:"video_file",name:"video_file",label:t.video_path?"Upload New Campaign Video":"Upload Campaign Video (Optional)",accept:"video/*",maxSize:50,value:s.video_file,onChange:(a,i)=>{l("video_file",a),i&&console.error("Video upload error:",i)},error:o.video_file,description:"MP4, AVI, MOV, WMV, FLV, WebM up to 50MB",preview:!1})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(d,{htmlFor:"video_url",value:"Or Video URL (YouTube/Vimeo)"}),e.jsx(c,{id:"video_url",type:"url",className:"mt-1 block w-full",value:s.video_url,onChange:a=>l("video_url",a.target.value),placeholder:"https://www.youtube.com/watch?v=... or https://vimeo.com/..."}),e.jsx(m,{message:o.video_url,className:"mt-2"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You can either upload a video file above or provide a YouTube/Vimeo URL here"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Payment Methods"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-4",children:[{value:"bank_transfer",label:"Bank Transfer"},{value:"mobile_money",label:"Mobile Money"},{value:"cash",label:"Cash"}].map(a=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500",checked:s.payment_methods.includes(a.value),onChange:i=>N(a.value,i.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:a.label})]},a.value))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"bank_details",value:"Bank Details"}),e.jsx(u,{id:"bank_details",className:"mt-1 block w-full",rows:4,value:s.bank_details,onChange:a=>l("bank_details",a.target.value),placeholder:`Account Name: Campaign Name
Bank: Bank Name
Account Number: 123456789`}),e.jsx(m,{message:o.bank_details,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"mobile_money_number",value:"Mobile Money Number"}),e.jsx(c,{id:"mobile_money_number",type:"text",className:"mt-1 block w-full",value:s.mobile_money_number,onChange:a=>l("mobile_money_number",a.target.value),placeholder:"+255 123 456 789"}),e.jsx(m,{message:o.mobile_money_number,className:"mt-2"})]})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Campaign Schedule"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"start_date",value:"Start Date"}),e.jsx(c,{id:"start_date",type:"date",className:"mt-1 block w-full",value:s.start_date,onChange:a=>l("start_date",a.target.value),required:!0}),e.jsx(m,{message:o.start_date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"end_date",value:"End Date (Optional)"}),e.jsx(c,{id:"end_date",type:"date",className:"mt-1 block w-full",value:s.end_date,onChange:a=>l("end_date",a.target.value)}),e.jsx(m,{message:o.end_date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"sort_order",value:"Sort Order"}),e.jsx(c,{id:"sort_order",type:"number",className:"mt-1 block w-full",value:s.sort_order,onChange:a=>l("sort_order",a.target.value),min:"0"}),e.jsx(m,{message:o.sort_order,className:"mt-2"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500",checked:s.is_featured,onChange:a=>l("is_featured",a.target.checked)}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Featured campaign (appears prominently)"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(g,{href:route("admin.fundraising-campaigns.show",t.id),children:e.jsx(v,{children:"Cancel"})}),e.jsx(E,{type:"submit",disabled:h,children:h?"Updating...":"Update Campaign"})]})]})})]})}export{te as default};
