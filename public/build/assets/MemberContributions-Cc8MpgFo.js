import{J as Y,a as $,j as t,S as A}from"./app-CCWscn4N.js";import{A as B,C as i,bd as F,n as C}from"./AdminSidebarLayout-BHFbP-0Z.js";import{d as p}from"./dayjs.min-Be2yCFt4.js";import{B as z}from"./index-Ad14op0C.js";import{R as M,C as m}from"./row-BLaRi8TG.js";import{D as h}from"./index-BVXbRpir.js";import{S as u}from"./index-DyamrY43.js";import{F as f}from"./Table-DUVIRzZL.js";import{T as k}from"./index-CCn2kg36.js";import{R as N}from"./CloseCircleOutlined-9LFhVxSu.js";import{R as E}from"./ClockCircleOutlined-BGBypZha.js";import{R as K}from"./CheckCircleOutlined-jfc3C_4A.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./PrimaryButton-0XQdD5oU.js";import"./SecondaryButton-DbLXN_Wj.js";import"./DownOutlined-B9GtLQuW.js";import"./index-C-HA1eIq.js";import"./index-CdwOtgdH.js";import"./useIcons-Bh5YfX0K.js";import"./getAllowClear-ggc3xdDv.js";import"./useForm-CpR6UdBL.js";import"./index-5hnhc-Y9.js";import"./Input-Br3Lt1rS.js";function pt(){var S;const{member:a={},year:d=new Date().getFullYear(),monthlyContributions:w={},otherContributions:g=[],penalties:b=[],summary:c={}}=Y().props,{token:s}=$.useToken(),r=e=>new Intl.NumberFormat("en-TZ",{style:"currency",currency:"TZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0),v=Array.from({length:12},(e,n)=>{const o=n+1,l=`${d}-${String(o).padStart(2,"0")}`,x=w[l]||[],y=x.reduce((T,R)=>T+parseFloat(R.amount||0),0),I=c.monthly_contribution_amount||5e4;let j="unpaid";return y>=I?j="paid":y>0&&(j="partial"),{month:o,monthName:p().month(n).format("MMMM"),monthKey:l,contributions:x,totalPaid:y,expectedAmount:I,status:j}}),D=[{title:"Month",dataIndex:"monthName",key:"monthName",width:150,render:(e,n)=>t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"bold"},children:e}),t.jsx("div",{style:{fontSize:"12px",color:s.colorTextSecondary},children:d})]})},{title:"Expected",dataIndex:"expectedAmount",key:"expectedAmount",width:150,render:e=>r(e)},{title:"Paid",dataIndex:"totalPaid",key:"totalPaid",width:150,render:e=>r(e)},{title:"Status",dataIndex:"status",key:"status",width:120,render:e=>{const n={paid:{color:"green",icon:t.jsx(K,{}),text:"Paid"},partial:{color:"orange",icon:t.jsx(E,{}),text:"Partial"},unpaid:{color:"red",icon:t.jsx(N,{}),text:"Unpaid"}},{color:o,icon:l,text:x}=n[e];return t.jsx(k,{color:o,icon:l,children:x})}},{title:"Payment Details",key:"details",render:(e,n)=>n.contributions.length===0?t.jsx("span",{style:{color:s.colorTextSecondary},children:"No payments"}):t.jsx("div",{children:n.contributions.map((o,l)=>t.jsxs("div",{style:{fontSize:"12px",marginBottom:"4px"},children:[t.jsxs("span",{style:{color:s.colorTextSecondary},children:[p(o.date).format("DD MMM"),":"]})," ",t.jsx("span",{style:{fontWeight:"bold"},children:r(o.amount)}),o.notes&&t.jsx("div",{style:{color:s.colorTextSecondary,fontSize:"11px"},children:o.notes})]},l))})}],_=[{title:"Date",dataIndex:"date",key:"date",width:150,render:e=>p(e).format("DD MMM YYYY")},{title:"Amount",dataIndex:"amount",key:"amount",width:150,render:e=>r(e)},{title:"Purpose",dataIndex:"purpose",key:"purpose"},{title:"Notes",dataIndex:"notes",key:"notes",ellipsis:!0}],P=[{title:"Date",dataIndex:"created_at",key:"created_at",width:150,render:e=>p(e).format("DD MMM YYYY")},{title:"Amount",dataIndex:"amount",key:"amount",width:150,render:e=>r(e)},{title:"Reason",dataIndex:"reason",key:"reason"},{title:"Status",dataIndex:"status",key:"status",width:120,render:e=>t.jsx(k,{color:e==="paid"?"green":"orange",children:e})}];return t.jsx(B,{children:t.jsxs("div",{style:{padding:"24px 0"},children:[t.jsx(z,{items:[{title:t.jsx("span",{onClick:()=>A.visit(route("admin-portal.financials")),style:{cursor:"pointer",color:s.colorPrimary},children:"Financials"})},{title:`${a.name} - ${d}`}],style:{marginBottom:"24px"}}),t.jsx(i,{style:{marginBottom:"24px"},children:t.jsxs(M,{gutter:[24,24],align:"middle",children:[t.jsx(m,{children:t.jsx(F,{size:80,src:a.image_path?`/storage/${a.image_path}`:void 0,style:{backgroundColor:s.colorPrimary},children:(S=a.name)==null?void 0:S.split(" ").map(e=>e[0]).join("").toUpperCase()})}),t.jsxs(m,{flex:"auto",children:[t.jsx("h2",{style:{margin:0,marginBottom:"8px"},children:a.name}),t.jsxs(h,{column:3,size:"small",children:[t.jsx(h.Item,{label:"Email",children:a.email}),t.jsx(h.Item,{label:"Phone",children:a.phone_number}),t.jsx(h.Item,{label:"Year",children:d})]})]})]})}),t.jsxs(M,{gutter:[16,16],style:{marginBottom:"24px"},children:[t.jsx(m,{xs:24,sm:12,md:6,children:t.jsx(i,{children:t.jsx(u,{title:"Total Monthly Contributions",value:c.total_monthly_contributions||0,formatter:e=>r(e),prefix:t.jsx(C,{})})})}),t.jsx(m,{xs:24,sm:12,md:6,children:t.jsx(i,{children:t.jsx(u,{title:"Total Other Contributions",value:c.total_other_contributions||0,formatter:e=>r(e),prefix:t.jsx(C,{})})})}),t.jsx(m,{xs:24,sm:12,md:6,children:t.jsx(i,{children:t.jsx(u,{title:"Total Penalties",value:c.total_penalties||0,formatter:e=>r(e),valueStyle:{color:s.colorError}})})}),t.jsx(m,{xs:24,sm:12,md:6,children:t.jsx(i,{children:t.jsx(u,{title:"Months Paid",value:`${c.months_paid||0}/12`,suffix:"months"})})})]}),t.jsx(i,{title:`Monthly Contributions - ${d}`,style:{marginBottom:"24px"},children:t.jsx(f,{columns:D,dataSource:v,rowKey:"month",pagination:!1,scroll:{x:800}})}),g.length>0&&t.jsx(i,{title:"Other Contributions",style:{marginBottom:"24px"},children:t.jsx(f,{columns:_,dataSource:g,rowKey:"id",pagination:{pageSize:10},scroll:{x:800}})}),b.length>0&&t.jsx(i,{title:"Penalties",children:t.jsx(f,{columns:P,dataSource:b,rowKey:"id",pagination:{pageSize:10},scroll:{x:800}})})]})})}export{pt as default};
