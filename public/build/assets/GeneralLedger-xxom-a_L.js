import{t as v,r as u,j as e,Q as I,S as b}from"./app-D2e3E3XV.js";import{A as k,C as a,S as M,B as g}from"./AdminSidebarLayout-COqDSJm5.js";import{d as c}from"./dayjs.min-sc-J1EWQ.js";import{S as T}from"./index-dQJIm9ox.js";import{D as C}from"./index-SHICJdD7.js";import{R as B}from"./useIcons-Bk-sqBIx.js";import{R as P}from"./DownloadOutlined-CK9diUBp.js";import{E as p}from"./index-DD8aZ74l.js";import{D as d}from"./index-m1LPvFb4.js";import{T as _}from"./index-m_fbIKNS.js";import{F as n}from"./Table-BwkSv8cC.js";import{T as R}from"./index-DlUzflYL.js";import"./SessionTimeout-CfqEmPbo.js";import"./Modal-J3vqZBmM.js";import"./transition-BB8nYaSI.js";import"./PrimaryButton-CAxNNQMa.js";import"./SecondaryButton-DEXX7yh7.js";import"./CalendarOutlined-D-3mNytr.js";import"./ClockCircleOutlined-qBW9qdtJ.js";import"./getAllowClear-BoT9aE4f.js";import"./DownOutlined-D3g4QtBj.js";import"./useForm-D6sLoAH1.js";import"./index-B8k0MQXY.js";import"./Input-xs5RiVsA.js";import"./EditOutlined-DJbavOcF.js";import"./TextArea-Ba86vcsD.js";const{Title:ce,Text:m}=R;function de({accounts:x,ledgerData:o,filters:s}){const{token:t}=v.useToken(),[h,y]=u.useState(s.account_id||null),[l,S]=u.useState(s.date_from?c(s.date_from):null),[i,j]=u.useState(s.date_to?c(s.date_to):null),E=()=>{b.get("/admin-portal/general-ledger",{account_id:h,date_from:l?l.format("YYYY-MM-DD"):null,date_to:i?i.format("YYYY-MM-DD"):null},{preserveState:!0,preserveScroll:!0})},w=()=>{y(null),S(null),j(null),b.get("/admin-portal/general-ledger",{},{preserveState:!0,preserveScroll:!0})},L=()=>{console.log("Export ledger")},Y=r=>({asset:"blue",liability:"red",equity:"purple",revenue:"green",expense:"orange"})[r]||"default",F=[{title:"Date",dataIndex:"date",key:"date",width:120,render:r=>c(r).format("MMM DD, YYYY")},{title:"Entry Number",dataIndex:"entry_number",key:"entry_number",width:140},{title:"Reference",dataIndex:"reference",key:"reference",width:120,render:r=>r||"-"},{title:"Description",dataIndex:"description",key:"description",ellipsis:!0},{title:"Debit",dataIndex:"debit",key:"debit",width:140,align:"right",render:r=>r>0?`TZS ${parseFloat(r).toLocaleString()}`:"-"},{title:"Credit",dataIndex:"credit",key:"credit",width:140,align:"right",render:r=>r>0?`TZS ${parseFloat(r).toLocaleString()}`:"-"},{title:"Balance",dataIndex:"balance",key:"balance",width:150,align:"right",render:r=>e.jsxs("strong",{style:{color:r<0?t.colorError:t.colorText},children:["TZS ",parseFloat(r).toLocaleString()]})}];return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"General Ledger - Tabata Welfare Association"}),e.jsx(k,{children:e.jsxs(a,{children:[e.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs(M,{wrap:!0,children:[e.jsx(T,{placeholder:"Select Account",value:h,onChange:y,style:{width:300},showSearch:!0,optionFilterProp:"children",filterOption:(r,f)=>f.children.toLowerCase().includes(r.toLowerCase()),children:x==null?void 0:x.map(r=>e.jsxs(T.Option,{value:r.id,children:[r.account_code," - ",r.account_name]},r.id))}),e.jsx(C,{placeholder:"From Date",value:l,onChange:S,style:{width:140}}),e.jsx(C,{placeholder:"To Date",value:i,onChange:j,style:{width:140}}),e.jsx(g,{onClick:E,type:"primary",icon:e.jsx(B,{}),disabled:!h,children:"View Ledger"}),e.jsx(g,{onClick:w,children:"Reset"})]}),o&&e.jsx(g,{icon:e.jsx(P,{}),onClick:L,children:"Export"})]}),o?e.jsxs("div",{children:[e.jsx(a,{size:"small",style:{marginBottom:16,backgroundColor:t.colorBgContainer},children:e.jsxs(d,{column:4,size:"small",children:[e.jsx(d.Item,{label:"Account Code",children:e.jsx("strong",{children:o.account.account_code})}),e.jsx(d.Item,{label:"Account Name",children:e.jsx("strong",{children:o.account.account_name})}),e.jsx(d.Item,{label:"Type",children:e.jsx(_,{color:Y(o.account.account_type),children:o.account.account_type.toUpperCase()})}),e.jsx(d.Item,{label:"Normal Balance",children:e.jsx(_,{color:o.account.normal_balance==="debit"?"blue":"green",children:o.account.normal_balance.toUpperCase()})})]})}),e.jsx(n,{columns:F,dataSource:o.transactions,rowKey:"id",pagination:!1,size:"small",bordered:!0,scroll:{x:1e3},locale:{emptyText:e.jsx(p,{description:"No transactions found for this account",image:p.PRESENTED_IMAGE_SIMPLE})},summary:()=>e.jsxs(e.Fragment,{children:[e.jsxs(n.Summary.Row,{style:{backgroundColor:t.colorBgLayout},children:[e.jsx(n.Summary.Cell,{index:0,colSpan:4,children:e.jsx("strong",{children:"Opening Balance"})}),e.jsx(n.Summary.Cell,{index:1,colSpan:2,align:"right",children:e.jsxs("strong",{children:["TZS ",parseFloat(o.opening_balance).toLocaleString()]})}),e.jsx(n.Summary.Cell,{index:2})]}),e.jsxs(n.Summary.Row,{style:{backgroundColor:t.colorBgLayout},children:[e.jsx(n.Summary.Cell,{index:0,colSpan:4,children:e.jsx("strong",{children:"Total Transactions"})}),e.jsx(n.Summary.Cell,{index:1,align:"right",children:e.jsxs("strong",{style:{color:t.colorPrimary},children:["TZS ",parseFloat(o.total_debit).toLocaleString()]})}),e.jsx(n.Summary.Cell,{index:2,align:"right",children:e.jsxs("strong",{style:{color:t.colorPrimary},children:["TZS ",parseFloat(o.total_credit).toLocaleString()]})}),e.jsx(n.Summary.Cell,{index:3})]}),e.jsxs(n.Summary.Row,{style:{backgroundColor:t.colorPrimaryBg},children:[e.jsx(n.Summary.Cell,{index:0,colSpan:4,children:e.jsx("strong",{children:"Ending Balance"})}),e.jsx(n.Summary.Cell,{index:1,colSpan:2,align:"right",children:e.jsxs("strong",{style:{fontSize:"16px",color:o.ending_balance<0?t.colorError:t.colorSuccess},children:["TZS ",parseFloat(o.ending_balance).toLocaleString()]})}),e.jsx(n.Summary.Cell,{index:2})]})]})}),e.jsxs("div",{style:{marginTop:16,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs(a,{size:"small",children:[e.jsx(m,{type:"secondary",children:"Opening Balance"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px"},children:["TZS ",parseFloat(o.opening_balance).toLocaleString()]})]}),e.jsxs(a,{size:"small",children:[e.jsx(m,{type:"secondary",children:"Total Debits"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:t.colorPrimary},children:["TZS ",parseFloat(o.total_debit).toLocaleString()]})]}),e.jsxs(a,{size:"small",children:[e.jsx(m,{type:"secondary",children:"Total Credits"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:t.colorPrimary},children:["TZS ",parseFloat(o.total_credit).toLocaleString()]})]}),e.jsxs(a,{size:"small",children:[e.jsx(m,{type:"secondary",children:"Ending Balance"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:o.ending_balance<0?t.colorError:t.colorSuccess},children:["TZS ",parseFloat(o.ending_balance).toLocaleString()]})]})]}),(l||i)&&e.jsx("div",{style:{marginTop:16,textAlign:"center"},children:e.jsxs(m,{type:"secondary",children:["Period: ",l?c(l).format("MMM DD, YYYY"):"Beginning"," to ",i?c(i).format("MMM DD, YYYY"):"Present"]})})]}):e.jsx(p,{description:"Select an account to view its general ledger",image:p.PRESENTED_IMAGE_SIMPLE})]})})]})}export{de as default};
