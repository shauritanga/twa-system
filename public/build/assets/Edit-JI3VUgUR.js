import{r as f,x as y,j as e}from"./app-CCWscn4N.js";import{S as F}from"./SidebarLayout-D4nqS7b6.js";import{F as S}from"./ArrowLeftIcon-Chvcx7Z8.js";import{F as A}from"./CameraIcon-CoaYdYC6.js";import{F as U}from"./TrashIcon-DME0PLII.js";import{F as D}from"./CheckCircleIcon-Ba1qBm0g.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./PrimaryButton-0XQdD5oU.js";import"./SecondaryButton-DbLXN_Wj.js";function K({user:t}){const[d,n]=f.useState(null),[m,x]=f.useState(!1),v=()=>window.location.pathname.startsWith("/admin/")?"/admin/dashboard":"/member/dashboard",g=()=>window.location.pathname.startsWith("/admin/")?"/admin/profile":"/member/profile",{data:s,setData:l,patch:k,processing:u,errors:a}=y({name:t.name||"",email:t.email||"",phone:t.phone||"",date_of_birth:t.date_of_birth||"",bio:t.bio||"",address:t.address||"",city:t.city||"",region:t.region||"",postal_code:t.postal_code||""}),{data:b,setData:i,processing:h}=y({avatar:null}),j=()=>window.location.pathname.startsWith("/admin/")?"/admin/profile":"/member/profile",w=r=>{r.preventDefault(),k(j(),{preserveScroll:!0})},N=r=>{const o=r.target.files[0];if(o){i("avatar",o);const c=new FileReader;c.onload=P=>n(P.target.result),c.readAsDataURL(o)}},p=()=>window.location.pathname.startsWith("/admin/")?"/admin/profile/avatar":"/member/profile/avatar",C=async()=>{if(b.avatar){const r=p();console.log("Uploading avatar to:",r),x(!0);try{const o=new FormData;if(o.append("avatar",b.avatar),(await fetch(r,{method:"POST",body:o,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok)console.log("Avatar upload successful"),n(null),i("avatar",null),window.location.reload();else throw new Error("Upload failed")}catch(o){console.error("Avatar upload failed:",o),alert("Failed to upload avatar. Please try again.")}finally{x(!1)}}},_=()=>{confirm("Are you sure you want to remove your profile photo?")&&fetch(p(),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(()=>{window.location.reload()})};return e.jsx(F,{children:e.jsxs("div",{className:"p-6 w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs("a",{href:g(),className:"flex items-center text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200",children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"Back to Profile"]}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("a",{href:v(),className:"flex items-center text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200",children:"Back to Dashboard"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Edit Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Update your personal information and preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 h-fit",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Photo"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:d||t.avatar_url,alt:t.name,className:"w-32 h-32 rounded-full border-4 border-gray-200 dark:border-gray-600 shadow-lg"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full cursor-pointer shadow-lg transition-colors duration-200",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden"})]})]}),d&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("button",{onClick:C,disabled:h||m,className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors duration-200",children:h||m?"Uploading...":"Save Photo"}),e.jsx("button",{onClick:()=>{n(null),i("avatar",null)},className:"w-full px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors duration-200",children:"Cancel"})]}),t.avatar&&!d&&e.jsxs("button",{onClick:_,className:"mt-4 flex items-center justify-center w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Remove Photo"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"JPG, PNG or GIF. Max size 2MB."})]})]})}),e.jsx("div",{className:"xl:col-span-3",children:e.jsxs("form",{onSubmit:w,className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 xl:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>l("name",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.name})]}),e.jsxs("div",{className:"md:col-span-2 xl:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:s.email,onChange:r=>l("email",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:s.phone,onChange:r=>l("phone",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",value:s.date_of_birth,onChange:r=>l("date_of_birth",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.date_of_birth&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.date_of_birth})]}),e.jsxs("div",{className:"md:col-span-2 xl:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),e.jsx("textarea",{value:s.bio,onChange:r=>l("bio",r.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Tell us about yourself..."}),a.bio&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.bio})]}),e.jsxs("div",{className:"md:col-span-2 xl:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",value:s.address,onChange:r=>l("address",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.address&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"City"}),e.jsx("input",{type:"text",value:s.city,onChange:r=>l("city",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Region/State"}),e.jsx("input",{type:"text",value:s.region,onChange:r=>l("region",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.region&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.region})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",value:s.postal_code,onChange:r=>l("postal_code",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.postal_code&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.postal_code})]})]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsx("a",{href:g(),className:"w-full sm:w-auto px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 text-center",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors duration-200 flex items-center justify-center",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]})})]})]})})}export{K as default};
