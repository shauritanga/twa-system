import{r as i,x as f,j as e,Q as L}from"./app-CCWscn4N.js";import{G as S}from"./GuestLayout-CPWeUh3w.js";import{I as T}from"./InputError-DhZzip9X.js";import{I as z}from"./InputLabel-CkuccGPf.js";import{P as B}from"./PrimaryButton-0XQdD5oU.js";import{S as M}from"./SecondaryButton-DbLXN_Wj.js";import{T as V}from"./TextInput-B3Usmh-h.js";function H({email:p,canResend:j=!0}){const[s,o]=i.useState(300),[l,c]=i.useState(!j),[r,d]=i.useState(0),{data:m,setData:g,post:x,processing:u,errors:v,clearErrors:h}=f({code:""}),{post:y,processing:n}=f({});i.useEffect(()=>{if(s>0){const t=setTimeout(()=>o(s-1),1e3);return()=>clearTimeout(t)}},[s]),i.useEffect(()=>{if(r>0){const t=setTimeout(()=>d(r-1),1e3);return()=>clearTimeout(t)}else c(!0)},[r]);const k=t=>{const a=Math.floor(t/60),C=t%60;return`${a}:${C.toString().padStart(2,"0")}`},N=t=>{t.preventDefault(),h(),x(route("otp.verify"))},b=()=>{!l||n||(c(!1),d(60),o(300),y(route("otp.resend")))},w=t=>{const a=t.target.value.replace(/\D/g,"").slice(0,6);g("code",a),a.length===6&&(h(),setTimeout(()=>{x(route("otp.verify"))},100))};return e.jsxs(S,{children:[e.jsx(L,{title:"Verify Your Identity"}),e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Verify Your Identity"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"We've sent a 6-digit verification code to"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:p})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"code",value:"Verification Code"}),e.jsx(V,{id:"code",type:"text",name:"code",value:m.code,className:"mt-1 block w-full text-center text-2xl font-mono tracking-widest",placeholder:"000000",onChange:w,maxLength:6,autoComplete:"one-time-code",autoFocus:!0}),e.jsx(T,{message:v.code,className:"mt-2"}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Enter the 6-digit code from your email"})})]}),e.jsx("div",{className:"text-center",children:s>0?e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Code expires in ",k(s)]}):e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Code has expired"]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[e.jsx(M,{type:"button",onClick:b,disabled:!l||n,className:"flex-1",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):r>0?`Resend in ${r}s`:"Resend Code"}),e.jsx(B,{disabled:u||m.code.length!==6,className:"flex-1",children:u?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify Code"})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"flex-shrink-0 h-5 w-5 text-blue-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"ml-3 text-left",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Security Tips"}),e.jsx("div",{className:"mt-1 text-xs text-blue-700 dark:text-blue-300",children:e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Never share your verification code with anyone"}),e.jsx("li",{children:"The code expires in 5 minutes for security"}),e.jsx("li",{children:"Check your spam folder if you don't see the email"})]})})]})]})})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:route("login"),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:"‚Üê Back to login"})})]})]})}export{H as default};
