import{a as I,r as E,j as e,S as v}from"./app-CCWscn4N.js";import{A as C,S as F,B as j,C as c}from"./AdminSidebarLayout-BHFbP-0Z.js";import{d as p}from"./dayjs.min-Be2yCFt4.js";import{A as Y}from"./index-CijJxMn4.js";import{R as Z}from"./CheckCircleOutlined-jfc3C_4A.js";import{R as z}from"./CloseCircleOutlined-9LFhVxSu.js";import{D as $}from"./index-D2nthcHU.js";import{R as D}from"./DownloadOutlined-DAAaMqUK.js";import{T as R}from"./index-iEk3Z0oW.js";import{R as n,C as i}from"./row-BLaRi8TG.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./PrimaryButton-0XQdD5oU.js";import"./SecondaryButton-DbLXN_Wj.js";import"./CheckCircleFilled-B-8ZM7Vi.js";import"./InfoCircleFilled-BBeUonew.js";import"./useIcons-Bh5YfX0K.js";import"./getAllowClear-ggc3xdDv.js";import"./DownOutlined-B9GtLQuW.js";import"./CalendarOutlined-eixNbCoN.js";import"./ClockCircleOutlined-BGBypZha.js";import"./EditOutlined-BgapihRa.js";import"./TextArea-n8YGhIra.js";const{Title:k,Text:t}=R;function ge({assets:S,liabilities:u,equity:T,groupedAssets:P,groupedLiabilities:M,groupedEquity:q,totals:o,filters:g}){const{token:r}=I.useToken(),[y,f]=E.useState(g.as_of_date?p(g.as_of_date):p()),B=()=>{v.get("/admin-portal/balance-sheet",{as_of_date:y.format("YYYY-MM-DD")},{preserveState:!0,preserveScroll:!0})},b=()=>{console.log("Export balance sheet")},m=(_,x,h=!0)=>{if(!x||x.length===0)return null;const L=x.reduce((s,l)=>{const a=l.account_subtype||"Other";return s[a]||(s[a]=[]),s[a].push(l),s},{});return e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(k,{level:5,style:{marginBottom:16,color:r.colorPrimary,borderBottom:`2px solid ${r.colorPrimary}`,paddingBottom:8},children:_}),Object.entries(L).map(([s,l])=>{const a=l.reduce((d,A)=>d+parseFloat(A.balance),0);return e.jsxs("div",{style:{marginBottom:16},children:[h&&e.jsx("div",{style:{fontWeight:"bold",marginBottom:8,color:r.colorTextSecondary},children:s}),l.map(d=>e.jsxs(n,{style:{marginBottom:4,paddingLeft:h?16:0},children:[e.jsx(i,{span:16,children:e.jsx(t,{children:d.account_name})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{children:["TZS ",parseFloat(d.balance).toLocaleString()]})})]},d.id)),h&&l.length>1&&e.jsxs(n,{style:{marginTop:8,paddingLeft:16,borderTop:`1px solid ${r.colorBorder}`,paddingTop:4},children:[e.jsx(i,{span:16,children:e.jsxs(t,{strong:!0,children:["Total ",s]})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,children:["TZS ",a.toLocaleString()]})})]})]},s)})]})};return e.jsxs(C,{children:[o&&e.jsx(Y,{message:o.is_balanced?"Balance Sheet is Balanced":"Balance Sheet is Out of Balance",description:o.is_balanced?"Assets equal Liabilities plus Equity. Your financial position is properly stated.":`There is a difference of TZS ${parseFloat(o.difference).toLocaleString()}. Please review your accounts.`,type:o.is_balanced?"success":"error",icon:o.is_balanced?e.jsx(Z,{}):e.jsx(z,{}),showIcon:!0,style:{marginBottom:16}}),e.jsxs("div",{style:{marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[e.jsxs(F,{children:[e.jsx($,{placeholder:"As of Date",value:y,onChange:f,style:{width:160}}),e.jsx(j,{onClick:B,type:"primary",children:"Generate Report"})]}),e.jsx(j,{icon:e.jsx(D,{}),onClick:b,children:"Export"})]}),e.jsxs("div",{style:{padding:24,backgroundColor:r.colorBgContainer,border:`1px solid ${r.colorBorder}`,borderRadius:8},children:[e.jsx("div",{style:{textAlign:"center",marginBottom:32},children:e.jsxs(t,{type:"secondary",children:["As of ",p(g.as_of_date).format("MMMM DD, YYYY")]})}),m("ASSETS",S),e.jsxs(n,{style:{marginBottom:32,paddingTop:12,borderTop:`2px solid ${r.colorPrimary}`,borderBottom:`3px double ${r.colorPrimary}`,paddingBottom:12},children:[e.jsx(i,{span:16,children:e.jsx(t,{strong:!0,style:{fontSize:16},children:"TOTAL ASSETS"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,style:{fontSize:16,color:r.colorPrimary},children:["TZS ",parseFloat(o.total_assets).toLocaleString()]})})]}),m("LIABILITIES",u),e.jsxs(n,{style:{marginBottom:16,paddingTop:8,borderTop:`1px solid ${r.colorBorder}`,paddingBottom:8},children:[e.jsx(i,{span:16,children:e.jsx(t,{strong:!0,children:"TOTAL LIABILITIES"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,children:["TZS ",parseFloat(o.total_liabilities).toLocaleString()]})})]}),m("EQUITY",T,!1),o.net_income!==0&&e.jsxs(n,{style:{marginBottom:8},children:[e.jsx(i,{span:16,children:e.jsx(t,{children:"Net Income (Current Period)"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{style:{color:o.net_income>=0?r.colorSuccess:r.colorError},children:["TZS ",parseFloat(o.net_income).toLocaleString()]})})]}),e.jsxs(n,{style:{marginBottom:16,paddingTop:8,borderTop:`1px solid ${r.colorBorder}`,paddingBottom:8},children:[e.jsx(i,{span:16,children:e.jsx(t,{strong:!0,children:"TOTAL EQUITY"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,children:["TZS ",parseFloat(o.total_equity_with_income).toLocaleString()]})})]}),e.jsxs(n,{style:{marginBottom:24,paddingTop:12,borderTop:`2px solid ${r.colorPrimary}`,borderBottom:`3px double ${r.colorPrimary}`,paddingBottom:12},children:[e.jsx(i,{span:16,children:e.jsx(t,{strong:!0,style:{fontSize:16},children:"TOTAL LIABILITIES & EQUITY"})}),e.jsx(i,{span:8,style:{textAlign:"right"},children:e.jsxs(t,{strong:!0,style:{fontSize:16,color:r.colorPrimary},children:["TZS ",parseFloat(o.total_liabilities_and_equity).toLocaleString()]})})]}),e.jsxs("div",{style:{textAlign:"center",padding:16,backgroundColor:o.is_balanced?r.colorSuccessBg:r.colorErrorBg,borderRadius:8,marginTop:24},children:[e.jsxs(t,{strong:!0,style:{fontSize:14},children:["Assets (TZS ",parseFloat(o.total_assets).toLocaleString(),")"," = ","Liabilities (TZS ",parseFloat(o.total_liabilities).toLocaleString(),")"," + ","Equity (TZS ",parseFloat(o.total_equity_with_income).toLocaleString(),")"]}),!o.is_balanced&&e.jsx("div",{style:{marginTop:8},children:e.jsxs(t,{type:"danger",children:["Difference: TZS ",parseFloat(o.difference).toLocaleString()]})})]}),e.jsx("div",{style:{marginTop:32,textAlign:"center",borderTop:`1px solid ${r.colorBorder}`,paddingTop:16},children:e.jsxs(t,{type:"secondary",style:{fontSize:12},children:["Generated on ",p().format("MMMM DD, YYYY HH:mm")]})})]}),e.jsxs("div",{style:{marginTop:24,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs(c,{size:"small",style:{backgroundColor:r.colorInfoBg},children:[e.jsx(t,{type:"secondary",children:"Total Assets"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:r.colorInfo},children:["TZS ",parseFloat(o.total_assets).toLocaleString()]})]}),e.jsxs(c,{size:"small",style:{backgroundColor:r.colorWarningBg},children:[e.jsx(t,{type:"secondary",children:"Total Liabilities"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:r.colorWarning},children:["TZS ",parseFloat(o.total_liabilities).toLocaleString()]})]}),e.jsxs(c,{size:"small",style:{backgroundColor:r.colorSuccessBg},children:[e.jsx(t,{type:"secondary",children:"Total Equity"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:r.colorSuccess},children:["TZS ",parseFloat(o.total_equity_with_income).toLocaleString()]})]}),e.jsxs(c,{size:"small",style:{backgroundColor:o.net_income>=0?r.colorSuccessBg:r.colorErrorBg},children:[e.jsx(t,{type:"secondary",children:"Net Income"}),e.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",marginTop:"8px",color:o.net_income>=0?r.colorSuccess:r.colorError},children:["TZS ",parseFloat(o.net_income).toLocaleString()]})]})]})]})}export{ge as default};
