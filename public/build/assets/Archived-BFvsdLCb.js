import{r as a,J as D,t as A,j as e,S as j}from"./app-Cfy4TXUM.js";import{I as E,A as _,S as v,p as L,D as O,B as P}from"./AdminSidebarLayout-Buj-taLG.js";import{B as $}from"./index-esw8YQV4.js";import{C as m}from"./index-mG9EyX9P.js";import{R as z}from"./ExclamationCircleOutlined-DLr1adoM.js";import{R as W,C as F}from"./row-DnGM8N7d.js";import{I as U}from"./index-BWhN2zcf.js";import{R as Y}from"./useIcons-C0CVJH8d.js";import{F as N}from"./Table-BDJDT3yO.js";import{E as H}from"./index-BqBQ4c5d.js";import{M as w,R as J}from"./index-BTuzFoE5.js";import{s as c}from"./index-CMJhgVxZ.js";import{R as K}from"./MoreOutlined-BWZw2gaf.js";import"./SessionTimeout-Dn5jdFb_.js";import"./Modal-dSY3wv-x.js";import"./transition-CwSGfga5.js";import"./PrimaryButton-D3tyYlDf.js";import"./SecondaryButton-HhmXi8wu.js";import"./DownOutlined-D7IvzF20.js";import"./Input-CfZxHJYv.js";import"./getAllowClear-CEhEtxYT.js";import"./EyeOutlined-c0yod4UM.js";import"./TextArea-kKKIj_tr.js";import"./index-BH-hJvoT.js";import"./useForm-WxDJKNk0.js";import"./scrollTo-CLqcVzDY.js";import"./index-Du1U9e5C.js";import"./CheckCircleFilled-JrBW7ofW.js";import"./InfoCircleFilled-Ce035z5p.js";import"./CSSMotionList-CIWGNMjx.js";var q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"};function C(){return C=Object.assign?Object.assign.bind():function(l){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(l[i]=t[i])}return l},C.apply(this,arguments)}const G=(l,o)=>a.createElement(E,C({},l,{ref:o,icon:q})),Q=a.forwardRef(G);function Te(){const{archivedMembers:l=[]}=D().props,{token:o}=A.useToken(),[t,i]=a.useState(""),[p,S]=a.useState(l),[h,x]=a.useState(""),[s,u]=a.useState(null),[k,f]=a.useState(!1),[R,g]=a.useState(!1),[d,y]=a.useState(null);a.useEffect(()=>{const r=l.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())||n.email.toLowerCase().includes(t.toLowerCase())||n.phone_number&&n.phone_number.includes(t));S(r)},[t,l]);const T=r=>{y(r),g(!0)},B=()=>{j.post(route("members.restore",d.id),{},{onSuccess:()=>{c.success("Member restored successfully"),g(!1),y(null)},onError:()=>{c.error("Failed to restore member")}})},M=()=>{if(h!==(s==null?void 0:s.name)){c.error("Member name does not match");return}j.delete(route("members.force-delete",s.id),{onSuccess:()=>{c.success("Member permanently deleted from the system"),f(!1),x(""),u(null)},onError:()=>{c.error("Failed to permanently delete member")}})},I=[{title:"Member",dataIndex:"name",key:"name",width:200,render:(r,n)=>e.jsxs(v,{children:[e.jsx(L,{size:"large",src:n.image_path?`/storage/${n.image_path}`:void 0,style:{backgroundColor:o.colorPrimary},children:r.split(" ").map(b=>b[0]).join("").toUpperCase()}),e.jsx("div",{children:e.jsx("div",{style:{fontWeight:"bold"},children:r})})]})},{title:"Email",dataIndex:"email",key:"email",width:180},{title:"Phone",dataIndex:"phone_number",key:"phone_number",width:130},{title:"Address",dataIndex:"address",key:"address",width:150},{title:"Archived Date",dataIndex:"deleted_at",key:"deleted_at",width:130,render:r=>r?new Date(r).toLocaleDateString():"-"},{title:"Actions",key:"actions",width:80,fixed:"right",render:(r,n)=>{const b=[{key:"restore",label:"Restore",icon:e.jsx(Q,{}),onClick:()=>T(n)},{key:"delete",label:"Permanently Delete",icon:e.jsx(J,{}),danger:!0,onClick:()=>{u(n),f(!0)}}];return e.jsx(O,{menu:{items:b},trigger:["click"],children:e.jsx(P,{type:"text",icon:e.jsx(K,{})})})}}];return e.jsx(_,{children:e.jsxs("div",{style:{padding:"24px 0"},children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsx($,{items:[{title:e.jsx("span",{onClick:()=>j.visit(route("admin-portal.members.index")),style:{cursor:"pointer",color:o.colorPrimary},children:"Members"})},{title:"Archived"}],style:{marginBottom:"24px"}})}),e.jsx(m,{style:{marginBottom:"24px",backgroundColor:o.colorWarningBg,borderColor:o.colorWarning,border:`1px solid ${o.colorWarning}`},children:e.jsxs(v,{children:[e.jsx(z,{style:{color:o.colorWarning,fontSize:"18px"}}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:o.colorText},children:"Archived Members"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:o.colorTextSecondary},children:"These members have been archived. You can restore them or permanently delete them from the system."})]})]})}),e.jsx(m,{style:{marginBottom:"24px"},children:e.jsx(W,{gutter:[16,16],align:"middle",children:e.jsx(F,{xs:24,sm:12,md:8,children:e.jsx(U,{placeholder:"Search by name, email, or phone...",prefix:e.jsx(Y,{}),value:t,onChange:r=>i(r.target.value),allowClear:!0,style:{backgroundColor:o.colorBgContainer,borderColor:o.colorBorder,color:o.colorText}})})})}),p.length>0?e.jsx(m,{children:e.jsx(N,{columns:I,dataSource:p,rowKey:"id",pagination:{pageSize:10,total:p.length},scroll:{x:1200},size:"middle"})}):e.jsx(m,{children:e.jsx(H,{description:t?"No archived members found":"No archived members",style:{padding:"48px 0"}})}),e.jsxs(w,{title:"Permanently Delete Member",open:k,onCancel:()=>{f(!1),x(""),u(null)},onOk:M,okText:"Delete",okButtonProps:{danger:!0,disabled:h!==(s==null?void 0:s.name)},cancelText:"Cancel",width:600,centered:!0,styles:{body:{maxHeight:"calc(100vh - 240px)",overflowY:"auto",paddingBottom:"16px"},mask:{backgroundColor:"rgba(0, 0, 0, 0.45)"}},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("p",{style:{color:o.colorError,fontWeight:"bold",marginBottom:"12px"},children:"⚠️ This action cannot be undone!"}),e.jsxs("p",{style:{color:o.colorText},children:["You are about to permanently delete ",e.jsx("strong",{children:s==null?void 0:s.name})," from the system. All associated data will be removed."]}),e.jsx("p",{style:{marginTop:"12px",color:o.colorTextSecondary},children:"To confirm, please type the member's name below:"})]}),e.jsx("input",{type:"text",placeholder:"Type member name to confirm",value:h,onChange:r=>x(r.target.value),style:{width:"100%",padding:"8px 12px",border:`1px solid ${o.colorBorder}`,borderRadius:"4px",fontSize:"14px",backgroundColor:o.colorBgContainer,color:o.colorText}})]}),e.jsxs(w,{title:"Restore Member",open:R,onCancel:()=>{g(!1),y(null)},onOk:B,okText:"Restore",cancelText:"Cancel",centered:!0,styles:{mask:{backgroundColor:"rgba(0, 0, 0, 0.45)"}},children:[e.jsxs("p",{children:["Are you sure you want to restore ",e.jsx("strong",{children:d==null?void 0:d.name}),"?"]}),e.jsx("p",{style:{color:o.colorTextSecondary,fontSize:"12px"},children:"This member will be restored to the active members list."})]})]})})}export{Te as default};
