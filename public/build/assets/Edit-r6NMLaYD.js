import{r as n,x as y,j as e}from"./app-BCoYgWpy.js";import{S}from"./SidebarLayout-kOlWGYoO.js";import{F}from"./ArrowLeftIcon-Dnv5uRMI.js";import{F as A}from"./CameraIcon-vk3OE-sy.js";import{F as E}from"./CheckCircleIcon-C6187jtT.js";import"./SessionTimeout-BSdDJ2Oa.js";import"./Modal-BszroB66.js";import"./transition-CN7I8a8f.js";import"./PrimaryButton-CfU57GbV.js";import"./SecondaryButton-BtrCzkae.js";import"./ShieldCheckIcon-CKcXqkNX.js";function U({title:t,titleId:d,...i},c){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":d},i),t?n.createElement("title",{id:d},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const D=n.forwardRef(U);function M({user:t}){const[d,i]=n.useState(null),[c,g]=n.useState(!1),v=()=>window.location.pathname.startsWith("/admin/")?"/admin-portal/dashboard":"/member/dashboard",u=()=>window.location.pathname.startsWith("/admin/")?"/admin/profile":"/member/profile",{data:s,setData:o,patch:k,processing:b,errors:a}=y({name:t.name||"",email:t.email||"",phone:t.phone||"",date_of_birth:t.date_of_birth||"",bio:t.bio||"",address:t.address||"",city:t.city||"",region:t.region||"",postal_code:t.postal_code||""}),{data:h,setData:m,processing:p}=y({avatar:null}),j=()=>window.location.pathname.startsWith("/admin/")?"/admin/profile":"/member/profile",w=r=>{r.preventDefault(),k(j(),{preserveScroll:!0})},N=r=>{const l=r.target.files[0];if(l){m("avatar",l);const x=new FileReader;x.onload=P=>i(P.target.result),x.readAsDataURL(l)}},f=()=>window.location.pathname.startsWith("/admin/")?"/admin/profile/avatar":"/member/profile/avatar",C=async()=>{if(h.avatar){const r=f();console.log("Uploading avatar to:",r),g(!0);try{const l=new FormData;if(l.append("avatar",h.avatar),(await fetch(r,{method:"POST",body:l,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok)console.log("Avatar upload successful"),i(null),m("avatar",null),window.location.reload();else throw new Error("Upload failed")}catch(l){console.error("Avatar upload failed:",l),alert("Failed to upload avatar. Please try again.")}finally{g(!1)}}},_=()=>{confirm("Are you sure you want to remove your profile photo?")&&fetch(f(),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(()=>{window.location.reload()})};return e.jsx(S,{children:e.jsxs("div",{className:"p-6 w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs("a",{href:u(),className:"flex items-center text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"Back to Profile"]}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("a",{href:v(),className:"flex items-center text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200",children:"Back to Dashboard"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Edit Profile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Update your personal information and preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[e.jsx("div",{className:"xl:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 h-fit",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Photo"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:d||t.avatar_url,alt:t.name,className:"w-32 h-32 rounded-full border-4 border-gray-200 dark:border-gray-600 shadow-lg"}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full cursor-pointer shadow-lg transition-colors duration-200",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden"})]})]}),d&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("button",{onClick:C,disabled:p||c,className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors duration-200",children:p||c?"Uploading...":"Save Photo"}),e.jsx("button",{onClick:()=>{i(null),m("avatar",null)},className:"w-full px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors duration-200",children:"Cancel"})]}),t.avatar&&!d&&e.jsxs("button",{onClick:_,className:"mt-4 flex items-center justify-center w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Remove Photo"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"JPG, PNG or GIF. Max size 2MB."})]})]})}),e.jsx("div",{className:"xl:col-span-3",children:e.jsxs("form",{onSubmit:w,className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 xl:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:r=>o("name",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.name})]}),e.jsxs("div",{className:"md:col-span-2 xl:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:s.email,onChange:r=>o("email",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:s.phone,onChange:r=>o("phone",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",value:s.date_of_birth,onChange:r=>o("date_of_birth",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.date_of_birth&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.date_of_birth})]}),e.jsxs("div",{className:"md:col-span-2 xl:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),e.jsx("textarea",{value:s.bio,onChange:r=>o("bio",r.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Tell us about yourself..."}),a.bio&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.bio})]}),e.jsxs("div",{className:"md:col-span-2 xl:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",value:s.address,onChange:r=>o("address",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.address&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"City"}),e.jsx("input",{type:"text",value:s.city,onChange:r=>o("city",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Region/State"}),e.jsx("input",{type:"text",value:s.region,onChange:r=>o("region",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.region&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.region})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",value:s.postal_code,onChange:r=>o("postal_code",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),a.postal_code&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:a.postal_code})]})]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsx("a",{href:u(),className:"w-full sm:w-auto px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 text-center",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"w-full sm:w-auto px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-lg transition-colors duration-200 flex items-center justify-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5 mr-2"}),"Save Changes"]})})]})]})})]})]})})}export{M as default};
