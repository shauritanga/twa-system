import{r as t,j as e,J as C,Q as T,m as f,S as N}from"./app-BCoYgWpy.js";import{S as E}from"./SidebarLayout-kOlWGYoO.js";import{T as $}from"./TextInput-MrvBohB-.js";import{u as R,L as I,F as L,T as z}from"./LoadingSpinner-BLt0FF7D.js";import{F as B}from"./MagnifyingGlassIcon-BDEohSAk.js";import{F as A}from"./EyeIcon-ClEsqIPA.js";import"./SessionTimeout-BSdDJ2Oa.js";import"./Modal-BszroB66.js";import"./transition-CN7I8a8f.js";import"./PrimaryButton-CfU57GbV.js";import"./SecondaryButton-BtrCzkae.js";import"./ShieldCheckIcon-CKcXqkNX.js";import"./CheckCircleIcon-C6187jtT.js";import"./InformationCircleIcon-CjPeoPrm.js";function H({title:l,titleId:i,...d},a){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":i},d),l?t.createElement("title",{id:i},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const M=t.forwardRef(H),O=t.forwardRef(function({className:i="",isFocused:d=!1,children:a,...g},o){const c=o||t.useRef();return t.useEffect(()=>{d&&c.current.focus()},[]),e.jsx("select",{...g,className:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm "+i,ref:c,children:a})});function ae({documents:l,filters:i,categories:d}){const{flash:a}=C().props,{toasts:g,success:o,error:c,info:p,removeToast:v}=R(),[m,w]=t.useState(i.search||""),[h,k]=t.useState(i.category||""),[x,y]=t.useState(new Set);t.useEffect(()=>{a!=null&&a.success&&o("Success",a.success),a!=null&&a.error&&c("Error",a.error),a!=null&&a.info&&p("Info",a.info)},[a]);const S=s=>{s.preventDefault(),N.get(route("member.documents.index"),{search:m,category:h},{preserveState:!0,replace:!0})},D=(s,r)=>{N.get(route("member.documents.index"),{search:m,category:r},{preserveState:!0,replace:!0})},_=s=>s>=1073741824?(s/1073741824).toFixed(2)+" GB":s>=1048576?(s/1048576).toFixed(2)+" MB":s>=1024?(s/1024).toFixed(2)+" KB":s+" bytes",b=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),F=s=>{const r=s.id;y(u=>new Set(u).add(r)),p("Download Started",`Downloading "${s.title}"...`);const n=s.createElement("a");n.href=route("documents.download",s.id),n.download=s.file_name,s.body.appendChild(n),n.click(),s.body.removeChild(n),setTimeout(()=>{y(u=>{const j=new Set(u);return j.delete(r),j}),o("Download Complete",`"${s.title}" has been downloaded successfully.`)},1500)};return e.jsxs(E,{children:[e.jsx(T,{title:"Documents"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:truncate sm:text-3xl sm:tracking-tight",children:"Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Access group documents, meeting minutes, and important files"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:Object.entries(d).map(([s,r])=>e.jsxs(f,{href:route("member.documents.category",s),className:"flex flex-col items-center p-4 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"text-2xl mb-2",children:[s==="meeting_minutes"&&"ðŸ“‹",s==="policies"&&"ðŸ“œ",s==="procedures"&&"ðŸ“",s==="financial_reports"&&"ðŸ“Š",s==="legal_documents"&&"âš–ï¸",s==="forms"&&"ðŸ“„",s==="announcements"&&"ðŸ“¢",s==="other"&&"ðŸ“"]}),e.jsx("span",{className:"text-xs text-center text-gray-600 dark:text-gray-400",children:r})]},s))})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg mb-6",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Documents"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{type:"text",value:m,onChange:s=>w(s.target.value),placeholder:"Search by title or description...",className:"pl-10"}),e.jsx(B,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs(O,{value:h,onChange:s=>{k(s.target.value),D("category",s.target.value)},children:[e.jsx("option",{value:"",children:"All Categories"}),Object.entries(d).map(([s,r])=>e.jsx("option",{value:s,children:r},s))]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.data.length===0?e.jsx("div",{className:"col-span-full",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No documents found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:m||h?"Try adjusting your search criteria.":"No documents have been uploaded yet."})]})}):l.data.map(s=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-3",children:s.file_icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.category_display})]})]})}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-3",children:s.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"File:"}),e.jsx("span",{className:"ml-1",children:s.file_name})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Size:"}),e.jsx("span",{className:"ml-1",children:_(s.file_size)})]}),s.document_date&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsx("span",{className:"ml-1",children:b(s.document_date)})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Uploaded:"}),e.jsx("span",{className:"ml-1",children:b(s.created_at)})]}),s.download_count>0&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Downloads:"}),e.jsx("span",{className:"ml-1",children:s.download_count})]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,3).map((r,n)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:r},n)),s.tags.length>3&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["+",s.tags.length-3," more"]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(f,{href:route("member.documents.show",s.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>F(s),disabled:x.has(s.id),className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${x.has(s.id)?"text-gray-400 bg-gray-300 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700"}`,children:[x.has(s.id)?e.jsx(I,{size:"sm",className:"mr-1"}):e.jsx(L,{className:"h-4 w-4 mr-1"}),x.has(s.id)?"Downloading...":"Download"]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.visibility_display})]})]})},s.id))}),l.links&&l.links.length>3&&e.jsx("div",{className:"mt-8 flex items-center justify-center",children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:l.links.map((s,r)=>e.jsx(f,{href:s.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:border-blue-400 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"} ${r===0?"rounded-l-md":""} ${r===l.links.length-1?"rounded-r-md":""}`,dangerouslySetInnerHTML:{__html:s.label}},r))})})]})}),e.jsx(z,{toasts:g,removeToast:v})]})}export{ae as default};
