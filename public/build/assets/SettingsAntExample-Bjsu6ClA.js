import{r as s,J as ue,a as pe,j as e,S as x}from"./app-CCWscn4N.js";import{I as xe,C as m,S as he,B as u,R as ge,a as ye,b as je,A as be,T as fe}from"./AdminSidebarLayout-BHFbP-0Z.js";import{F as a}from"./index-C7rJnUG_.js";import{T as h}from"./index-Djf7ccgm.js";import{S as d}from"./index-Csg_BGY-.js";import{D as g}from"./index-SmIZCTOT.js";import{R as y}from"./SaveOutlined-BalqY1dN.js";import{S as J}from"./index-C-HA1eIq.js";import{I as _e}from"./index-BFcOIicW.js";import{A as Se}from"./index-CijJxMn4.js";import{R as ve,C as W}from"./row-BLaRi8TG.js";import{s as l}from"./index-BhyvampS.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./PrimaryButton-0XQdD5oU.js";import"./SecondaryButton-DbLXN_Wj.js";import"./CSSMotionList-CEJCmY9t.js";import"./useForm-CpR6UdBL.js";import"./CheckCircleFilled-B-8ZM7Vi.js";import"./InfoCircleFilled-BBeUonew.js";import"./DownOutlined-B9GtLQuW.js";import"./index-CdwOtgdH.js";import"./useIcons-Bh5YfX0K.js";import"./getAllowClear-ggc3xdDv.js";import"./Input-Br3Lt1rS.js";import"./EyeOutlined-BXjcMdGf.js";import"./TextArea-n8YGhIra.js";var Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"};function j(){return j=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j.apply(this,arguments)}const Ie=(t,o)=>s.createElement(xe,j({},t,{ref:o,icon:Ce})),we=s.forwardRef(Ie);function nt(){var M,N,B,D,z,L,Y,O,P,q,$,U,Z;const{settings:t,recentLogins:o,systemStats:n}=ue().props,{token:r}=pe.useToken(),[Ee]=a.useForm(),[p,i]=s.useState(!1),[b,Te]=s.useState(""),[f,G]=s.useState(((M=t.monthly_contribution_amount)==null?void 0:M.value)||5e4),[_,H]=s.useState(((N=t.penalty_percentage_rate)==null?void 0:N.value)||10),[S,K]=s.useState(((B=t.apply_penalty_to_existing)==null?void 0:B.value)==="1"),[v,Q]=s.useState(((D=t.email_new_member)==null?void 0:D.value)==="1"),[C,V]=s.useState(((z=t.email_contribution_reminder)==null?void 0:z.value)==="1"),[I,X]=s.useState(((L=t.email_penalty_notice)==null?void 0:L.value)==="1"),[w,ee]=s.useState(((Y=t.email_system_alerts)==null?void 0:Y.value)==="1"),[E,te]=s.useState(((O=t.session_timeout_minutes)==null?void 0:O.value)||120),[T,se]=s.useState(((P=t.max_login_attempts)==null?void 0:P.value)||5),[A,ne]=s.useState(((q=t.enable_two_factor_auth)==null?void 0:q.value)==="1"),[R,ae]=s.useState((($=t.system_timezone)==null?void 0:$.value)||"Africa/Dar_es_Salaam"),[k,ie]=s.useState(((U=t.date_format)==null?void 0:U.value)||"Y-m-d"),[F,re]=s.useState(((Z=t.currency_symbol)==null?void 0:Z.value)||"TZS"),le=c=>{i(!0),x.post(route("admin.settings.update"),{monthly_contribution_amount:f,penalty_percentage_rate:_,apply_penalty_to_existing:S?1:0},{onSuccess:()=>{l.success("Financial settings updated successfully"),i(!1)},onError:()=>{l.error("Failed to update settings"),i(!1)}})},oe=()=>{i(!0),x.post(route("admin.settings.update"),{email_new_member:v?1:0,email_contribution_reminder:C?1:0,email_penalty_notice:I?1:0,email_system_alerts:w?1:0},{onSuccess:()=>{l.success("Email settings updated successfully"),i(!1)},onError:()=>{l.error("Failed to update settings"),i(!1)}})},ce=()=>{i(!0),x.post(route("admin.settings.update"),{session_timeout_minutes:E,max_login_attempts:T,enable_two_factor_auth:A?1:0},{onSuccess:()=>{l.success("Security settings updated successfully"),i(!1)},onError:()=>{l.error("Failed to update settings"),i(!1)}})},me=()=>{i(!0),x.post(route("admin.settings.update"),{system_timezone:R,date_format:k,currency_symbol:F},{onSuccess:()=>{l.success("System settings updated successfully"),i(!1)},onError:()=>{l.error("Failed to update settings"),i(!1)}})},de=[{key:"financial",label:e.jsxs("span",{children:[e.jsx(ge,{})," Financial"]}),children:e.jsx(m,{style:{marginTop:"16px"},children:e.jsxs(a,{layout:"vertical",onFinish:le,children:[e.jsx(a.Item,{label:"Monthly Contribution Amount (TZS)",required:!0,children:e.jsx(h,{value:f,onChange:G,min:0,step:1e3,style:{width:"100%"},formatter:c=>`${c}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:c=>c.replace(/\$\s?|(,*)/g,"")})}),e.jsx(a.Item,{label:"Penalty Percentage Rate (%)",required:!0,children:e.jsx(h,{value:_,onChange:H,min:0,max:100,step:.1,style:{width:"100%"}})}),e.jsx(a.Item,{label:"Apply Penalty to Existing Members",children:e.jsx(d,{checked:S,onChange:K})}),e.jsx(g,{}),e.jsx(a.Item,{children:e.jsxs(he,{children:[e.jsx(u,{type:"primary",htmlType:"submit",icon:e.jsx(y,{}),loading:p,children:"Save Changes"}),e.jsx(u,{icon:e.jsx(we,{}),children:"Reset"})]})})]})})},{key:"email",label:e.jsxs("span",{children:[e.jsx(ye,{})," Email Notifications"]}),children:e.jsxs(m,{style:{marginTop:"16px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:r.colorBgContainer,borderRadius:"4px"},children:[e.jsx("span",{children:"Email on New Member Registration"}),e.jsx(d,{checked:v,onChange:Q})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:r.colorBgContainer,borderRadius:"4px"},children:[e.jsx("span",{children:"Email Contribution Reminders"}),e.jsx(d,{checked:C,onChange:V})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:r.colorBgContainer,borderRadius:"4px"},children:[e.jsx("span",{children:"Email Penalty Notices"}),e.jsx(d,{checked:I,onChange:X})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:r.colorBgContainer,borderRadius:"4px"},children:[e.jsx("span",{children:"Email System Alerts"}),e.jsx(d,{checked:w,onChange:ee})]})]}),e.jsx(g,{}),e.jsx(u,{type:"primary",icon:e.jsx(y,{}),onClick:oe,loading:p,children:"Save Email Settings"})]})},{key:"security",label:e.jsxs("span",{children:[e.jsx(je,{})," Security"]}),children:e.jsx(m,{style:{marginTop:"16px"},children:e.jsxs(a,{layout:"vertical",children:[e.jsx(a.Item,{label:"Session Timeout (minutes)",required:!0,children:e.jsx(h,{value:E,onChange:te,min:5,max:1440,step:5,style:{width:"100%"}})}),e.jsx(a.Item,{label:"Max Login Attempts",required:!0,children:e.jsx(h,{value:T,onChange:se,min:1,max:10,style:{width:"100%"}})}),e.jsx(a.Item,{label:"Enable Two-Factor Authentication",children:e.jsx(d,{checked:A,onChange:ne})}),e.jsx(g,{}),e.jsx(u,{type:"primary",icon:e.jsx(y,{}),onClick:ce,loading:p,children:"Save Security Settings"})]})})},{key:"system",label:e.jsxs("span",{children:[e.jsx(CpuChipOutlined,{})," System"]}),children:e.jsx(m,{style:{marginTop:"16px"},children:e.jsxs(a,{layout:"vertical",children:[e.jsx(a.Item,{label:"Timezone",required:!0,children:e.jsx(J,{value:R,onChange:ae,options:[{label:"Africa/Dar_es_Salaam",value:"Africa/Dar_es_Salaam"},{label:"UTC",value:"UTC"},{label:"Europe/London",value:"Europe/London"},{label:"America/New_York",value:"America/New_York"}]})}),e.jsx(a.Item,{label:"Date Format",required:!0,children:e.jsx(J,{value:k,onChange:ie,options:[{label:"Y-m-d",value:"Y-m-d"},{label:"d/m/Y",value:"d/m/Y"},{label:"m/d/Y",value:"m/d/Y"}]})}),e.jsx(a.Item,{label:"Currency Symbol",required:!0,children:e.jsx(_e,{value:F,onChange:c=>re(c.target.value),maxLength:3})}),e.jsx(g,{}),e.jsx(u,{type:"primary",icon:e.jsx(y,{}),onClick:me,loading:p,children:"Save System Settings"})]})})}];return e.jsx(be,{children:e.jsxs("div",{style:{padding:"24px 0"},children:[e.jsx("h1",{style:{fontSize:"28px",fontWeight:"bold",marginBottom:"24px"},children:"Settings"}),b&&e.jsx(Se,{message:"Success",description:b,type:"success",showIcon:!0,closable:!0,style:{marginBottom:"24px"}}),e.jsxs(ve,{gutter:[16,16],children:[e.jsx(W,{xs:24,lg:18,children:e.jsx(m,{children:e.jsx(fe,{items:de})})}),e.jsx(W,{xs:24,lg:6,children:e.jsx(m,{title:"System Information",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Total Users:"}),e.jsx("div",{children:(n==null?void 0:n.total_users)||0})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Online Users:"}),e.jsx("div",{children:(n==null?void 0:n.online_users)||0})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Database Size:"}),e.jsx("div",{children:(n==null?void 0:n.database_size)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Storage Used:"}),e.jsx("div",{children:(n==null?void 0:n.storage_used)||"N/A"})]})]})})})]})]})})}export{nt as default};
