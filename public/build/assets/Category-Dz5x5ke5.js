import{J as D,r as m,j as e,Q as $,t as x,S as C}from"./app-CCWscn4N.js";import{S as _}from"./SidebarLayout-D4nqS7b6.js";import{T as L}from"./TextInput-B3Usmh-h.js";import{P as T}from"./PrimaryButton-0XQdD5oU.js";import{u as B,T as R}from"./useToast-C8LO0AXC.js";import{L as z}from"./LoadingSpinner-B6Ld_cPG.js";import{F as M}from"./ArrowLeftIcon-Chvcx7Z8.js";import{F as E}from"./MagnifyingGlassIcon-u4lgG6o9.js";import{F as I}from"./UserIcon-DDXGYZkO.js";import{F as U}from"./CalendarIcon-BwYi_s04.js";import{F as y}from"./ArrowDownTrayIcon-C-GP7aC4.js";import{F as P}from"./TagIcon-M0MPejPA.js";import{F as Q}from"./EyeIcon-DJbsJ0HV.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./SecondaryButton-DbLXN_Wj.js";import"./CheckCircleIcon-Ba1qBm0g.js";import"./InformationCircleIcon-DXHaClqH.js";import"./ExclamationCircleIcon-CdqybNTP.js";import"./XCircleIcon-CqlH9Z_j.js";function ce({documents:i,category:o,categoryName:n,categories:A}){const{flash:r}=D().props,{toasts:j,success:h,error:b,info:g,removeToast:w}=B(),[c,N]=m.useState(""),[d,f]=m.useState(new Set);m.useEffect(()=>{r!=null&&r.success&&h("Success",r.success),r!=null&&r.error&&b("Error",r.error),r!=null&&r.info&&g("Info",r.info)},[r]);const v=s=>{s.preventDefault(),C.get(route("member.documents.category",o),{search:c},{preserveState:!0,replace:!0})},k=s=>{const a=s.id;f(l=>new Set(l).add(a)),g("Download Started",`Downloading "${s.title}"...`);const t=s.createElement("a");t.href=route("documents.download",s.id),t.download=s.file_name,s.body.appendChild(t),t.click(),s.body.removeChild(t),setTimeout(()=>{f(l=>{const u=new Set(l);return u.delete(a),u}),h("Download Complete",`"${s.title}" has been downloaded successfully.`)},1500)},S=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),F=s=>{if(s===0)return"0 Bytes";const a=1024,t=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,l)).toFixed(2))+" "+t[l]},p=s=>{switch(s){case"meeting_minutes":return"ðŸ“‹";case"policies":return"ðŸ“œ";case"procedures":return"ðŸ“";case"financial_reports":return"ðŸ“Š";case"legal_documents":return"âš–ï¸";case"forms":return"ðŸ“„";case"announcements":return"ðŸ“¢";case"other":return"ðŸ“";default:return"ðŸ“"}};return e.jsxs(_,{children:[e.jsx($,{title:`${n} Documents`}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(x,{href:route("member.documents.index"),className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"Back to All Documents"]})})}),e.jsxs("div",{className:"mt-2 flex items-center space-x-3",children:[e.jsx("span",{className:"text-3xl",children:p(o)}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:["Browse documents in the ",n.toLowerCase()," category"]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("form",{onSubmit:v,className:"flex space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{className:"h-5 w-5 text-gray-400"})}),e.jsx(L,{type:"text",placeholder:`Search ${n.toLowerCase()}...`,className:"pl-10 block w-full",value:c,onChange:s=>N(s.target.value)})]})}),e.jsx(T,{type:"submit",children:"Search"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.data.length===0?e.jsx("div",{className:"col-span-full",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("span",{className:"text-6xl mb-4 block",children:p(o)}),e.jsxs("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:["No ",n.toLowerCase()," found"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:c?"Try adjusting your search criteria.":`No ${n.toLowerCase()} have been uploaded yet.`})]})}):i.data.map(s=>{var a;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"File:"}),e.jsx("span",{className:"ml-1",children:s.file_name}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{children:F(s.file_size)})]})]})}),s.description&&e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:s.description})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"font-medium",children:"Uploaded by:"}),e.jsx("span",{className:"ml-1",children:((a=s.uploader)==null?void 0:a.name)||"System"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"font-medium",children:"Uploaded:"}),e.jsx("span",{className:"ml-1",children:S(s.created_at)})]}),s.download_count>0&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"font-medium",children:"Downloads:"}),e.jsx("span",{className:"ml-1",children:s.download_count})]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,3).map((t,l)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),t]},l)),s.tags.length>3&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["+",s.tags.length-3," more"]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(x,{href:route("member.documents.show",s.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>k(s),disabled:d.has(s.id),className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${d.has(s.id)?"text-gray-400 bg-gray-300 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700"}`,children:[d.has(s.id)?e.jsx(z,{size:"sm",className:"mr-1"}):e.jsx(y,{className:"h-4 w-4 mr-1"}),d.has(s.id)?"Downloading...":"Download"]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.visibility_display})]})]})},s.id)})}),i.links&&i.links.length>3&&e.jsx("div",{className:"mt-8 flex items-center justify-center",children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:i.links.map((s,a)=>e.jsx(x,{href:s.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:border-blue-400 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"} ${a===0?"rounded-l-md":""} ${a===i.links.length-1?"rounded-r-md":""}`,dangerouslySetInnerHTML:{__html:s.label}},a))})})]})}),e.jsx(R,{toasts:j,removeToast:w})]})}export{ce as default};
