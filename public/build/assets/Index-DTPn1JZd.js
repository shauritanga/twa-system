import{J as C,r as n,j as e,Q as T,t as m,S as j}from"./app-CCWscn4N.js";import{S as $}from"./SidebarLayout-D4nqS7b6.js";import{T as z}from"./TextInput-B3Usmh-h.js";import{S as I}from"./SelectInput-29uheY41.js";import{u as E,T as L}from"./useToast-C8LO0AXC.js";import{L as R}from"./LoadingSpinner-B6Ld_cPG.js";import{F as B}from"./MagnifyingGlassIcon-u4lgG6o9.js";import{F as A}from"./DocumentIcon-DfMv9kcy.js";import{F as M}from"./EyeIcon-DJbsJ0HV.js";import{F as O}from"./ArrowDownTrayIcon-C-GP7aC4.js";import"./SessionTimeout-72mUHhjZ.js";import"./Modal-CTkSowC8.js";import"./transition-BcOJrHw_.js";import"./PrimaryButton-0XQdD5oU.js";import"./SecondaryButton-DbLXN_Wj.js";import"./CheckCircleIcon-Ba1qBm0g.js";import"./InformationCircleIcon-DXHaClqH.js";import"./ExclamationCircleIcon-CdqybNTP.js";import"./XCircleIcon-CqlH9Z_j.js";function ie({documents:l,filters:x,categories:g}){const{flash:r}=C().props,{toasts:b,success:h,error:N,info:p,removeToast:v}=E(),[i,w]=n.useState(x.search||""),[o,k]=n.useState(x.category||""),[d,f]=n.useState(new Set);n.useEffect(()=>{r!=null&&r.success&&h("Success",r.success),r!=null&&r.error&&N("Error",r.error),r!=null&&r.info&&p("Info",r.info)},[r]);const S=s=>{s.preventDefault(),j.get(route("member.documents.index"),{search:i,category:o},{preserveState:!0,replace:!0})},D=(s,a)=>{j.get(route("member.documents.index"),{search:i,category:a},{preserveState:!0,replace:!0})},_=s=>s>=1073741824?(s/1073741824).toFixed(2)+" GB":s>=1048576?(s/1048576).toFixed(2)+" MB":s>=1024?(s/1024).toFixed(2)+" KB":s+" bytes",u=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),F=s=>{const a=s.id;f(c=>new Set(c).add(a)),p("Download Started",`Downloading "${s.title}"...`);const t=s.createElement("a");t.href=route("documents.download",s.id),t.download=s.file_name,s.body.appendChild(t),t.click(),s.body.removeChild(t),setTimeout(()=>{f(c=>{const y=new Set(c);return y.delete(a),y}),h("Download Complete",`"${s.title}" has been downloaded successfully.`)},1500)};return e.jsxs($,{children:[e.jsx(T,{title:"Documents"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:truncate sm:text-3xl sm:tracking-tight",children:"Documents"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Access group documents, meeting minutes, and important files"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:Object.entries(g).map(([s,a])=>e.jsxs(m,{href:route("member.documents.category",s),className:"flex flex-col items-center p-4 bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"text-2xl mb-2",children:[s==="meeting_minutes"&&"ðŸ“‹",s==="policies"&&"ðŸ“œ",s==="procedures"&&"ðŸ“",s==="financial_reports"&&"ðŸ“Š",s==="legal_documents"&&"âš–ï¸",s==="forms"&&"ðŸ“„",s==="announcements"&&"ðŸ“¢",s==="other"&&"ðŸ“"]}),e.jsx("span",{className:"text-xs text-center text-gray-600 dark:text-gray-400",children:a})]},s))})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg mb-6",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Documents"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{type:"text",value:i,onChange:s=>w(s.target.value),placeholder:"Search by title or description...",className:"pl-10"}),e.jsx(B,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs(I,{value:o,onChange:s=>{k(s.target.value),D("category",s.target.value)},children:[e.jsx("option",{value:"",children:"All Categories"}),Object.entries(g).map(([s,a])=>e.jsx("option",{value:s,children:a},s))]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.data.length===0?e.jsx("div",{className:"col-span-full",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No documents found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:i||o?"Try adjusting your search criteria.":"No documents have been uploaded yet."})]})}):l.data.map(s=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-3",children:s.file_icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.category_display})]})]})}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4 line-clamp-3",children:s.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"File:"}),e.jsx("span",{className:"ml-1",children:s.file_name})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Size:"}),e.jsx("span",{className:"ml-1",children:_(s.file_size)})]}),s.document_date&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsx("span",{className:"ml-1",children:u(s.document_date)})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Uploaded:"}),e.jsx("span",{className:"ml-1",children:u(s.created_at)})]}),s.download_count>0&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Downloads:"}),e.jsx("span",{className:"ml-1",children:s.download_count})]})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,3).map((a,t)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:a},t)),s.tags.length>3&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:["+",s.tags.length-3," more"]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(m,{href:route("member.documents.show",s.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:[e.jsx(M,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>F(s),disabled:d.has(s.id),className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${d.has(s.id)?"text-gray-400 bg-gray-300 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700"}`,children:[d.has(s.id)?e.jsx(R,{size:"sm",className:"mr-1"}):e.jsx(O,{className:"h-4 w-4 mr-1"}),d.has(s.id)?"Downloading...":"Download"]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.visibility_display})]})]})},s.id))}),l.links&&l.links.length>3&&e.jsx("div",{className:"mt-8 flex items-center justify-center",children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:l.links.map((s,a)=>e.jsx(m,{href:s.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:border-blue-400 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"} ${a===0?"rounded-l-md":""} ${a===l.links.length-1?"rounded-r-md":""}`,dangerouslySetInnerHTML:{__html:s.label}},a))})})]})}),e.jsx(L,{toasts:b,removeToast:v})]})}export{ie as default};
